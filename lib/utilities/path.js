'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isPathName = isPathName;
exports.isPathTopmostName = isPathTopmostName;
exports.isPathRelativePath = isPathRelativePath;
exports.isPathAbsolutePath = isPathAbsolutePath;
exports.isTopmostNameInAbsolutePath = isTopmostNameInAbsolutePath;
exports.combinePaths = combinePaths;
exports.concatenatePaths = concatenatePaths;
exports.bottommostNameFromPath = bottommostNameFromPath;
exports.topmostDirectoryPathFromPath = topmostDirectoryPathFromPath;
exports.topmostDirectoryNameFromPath = topmostDirectoryNameFromPath;
exports.pathWithoutBottommostNameFromPath = pathWithoutBottommostNameFromPath;
exports.pathWithoutTopmostDirectoryNameFromPath = pathWithoutTopmostDirectoryNameFromPath;
exports["default"] = void 0;

var _array = require("../utilities/array");

function isPathName(path) {
  path = path.replace(/^\//, '').replace(/\/$/, ''); ///

  var pathName = /\//.test(path) === false;
  return pathName;
}

function isPathTopmostName(path) {
  var pathName = isPathName(path),
      pathAbsolutePath = isPathAbsolutePath(path),
      pathTopmostName = pathName && pathAbsolutePath;
  return pathTopmostName;
}

function isPathRelativePath(path) {
  var pathRelativePath = !/^\//.test(path);
  return pathRelativePath;
}

function isPathAbsolutePath(path) {
  var pathAbsolutePath = /^\//.test(path);
  return pathAbsolutePath;
}

function isTopmostNameInAbsolutePath(topmostName, absolutePath) {
  var regExp = new RegExp("^".concat(topmostName, "(?:\\/.+)?$")),
      topmostNameInAbsolutePath = regExp.test(absolutePath);
  return topmostNameInAbsolutePath;
}

function combinePaths(path, relativePath) {
  var combinedPath = null;
  var pathNames = path.split('/'),
      relativePathNames = relativePath.split('/');
  var lastPathName,
      firstRelativePathName = (0, _array.first)(relativePathNames);

  if (firstRelativePathName === '.') {
    relativePathNames.shift();
  }

  firstRelativePathName = (0, _array.first)(relativePathNames);
  lastPathName = (0, _array.last)(pathNames);

  while (firstRelativePathName === '..' && lastPathName !== undefined) {
    relativePathNames.shift();
    pathNames.pop();
    firstRelativePathName = (0, _array.first)(relativePathNames);
    lastPathName = (0, _array.last)(pathNames);
  }

  if (lastPathName !== undefined) {
    var combinedPathNames = [].concat(pathNames).concat(relativePathNames);
    combinedPath = combinedPathNames.join('/');
  }

  return combinedPath;
}

function concatenatePaths(path, relativePath) {
  path = path.replace(/\/$/, ''); ///

  var concatenatedPath = "".concat(path, "/").concat(relativePath);
  return concatenatedPath;
}

function bottommostNameFromPath(path) {
  var bottommostName = null;
  var matches = path.match(/^.*\/([^\/]+\/?)$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    bottommostName = secondMatch; ///
  }

  return bottommostName;
}

function topmostDirectoryPathFromPath(path) {
  var matches = path.match(/^(.+)\/[^\/]+\/?$/),
      secondMatch = (0, _array.second)(matches),
      topmostDirectoryPath = secondMatch; ///

  return topmostDirectoryPath;
}

function topmostDirectoryNameFromPath(path) {
  var topmostDirectoryName = null;
  var matches = path.match(/^([^\/]+)\/.+$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    topmostDirectoryName = secondMatch; ///
  }

  return topmostDirectoryName;
}

function pathWithoutBottommostNameFromPath(path) {
  var pathWithoutBottommostName = null;
  var matches = path.match(/^(.*)\/[^\/]+\/?$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    pathWithoutBottommostName = secondMatch; ///
  }

  return pathWithoutBottommostName;
}

function pathWithoutTopmostDirectoryNameFromPath(path) {
  var pathWithoutTopmostDirectoryName = null;
  var matches = path.match(/^[^\/]+\/(.+)$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    pathWithoutTopmostDirectoryName = secondMatch;
  }

  return pathWithoutTopmostDirectoryName;
}

var _default = {
  isPathName: isPathName,
  isPathTopmostName: isPathTopmostName,
  isPathRelativePath: isPathRelativePath,
  isPathAbsolutePath: isPathAbsolutePath,
  isTopmostNameInAbsolutePath: isTopmostNameInAbsolutePath,
  combinePaths: combinePaths,
  concatenatePaths: concatenatePaths,
  bottommostNameFromPath: bottommostNameFromPath,
  topmostDirectoryPathFromPath: topmostDirectoryPathFromPath,
  topmostDirectoryNameFromPath: topmostDirectoryNameFromPath,
  pathWithoutBottommostNameFromPath: pathWithoutBottommostNameFromPath,
  pathWithoutTopmostDirectoryNameFromPath: pathWithoutTopmostDirectoryNameFromPath
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhdGguanMiXSwibmFtZXMiOlsiaXNQYXRoTmFtZSIsInBhdGgiLCJyZXBsYWNlIiwicGF0aE5hbWUiLCJ0ZXN0IiwiaXNQYXRoVG9wbW9zdE5hbWUiLCJwYXRoQWJzb2x1dGVQYXRoIiwiaXNQYXRoQWJzb2x1dGVQYXRoIiwicGF0aFRvcG1vc3ROYW1lIiwiaXNQYXRoUmVsYXRpdmVQYXRoIiwicGF0aFJlbGF0aXZlUGF0aCIsImlzVG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aCIsInRvcG1vc3ROYW1lIiwiYWJzb2x1dGVQYXRoIiwicmVnRXhwIiwiUmVnRXhwIiwidG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aCIsImNvbWJpbmVQYXRocyIsInJlbGF0aXZlUGF0aCIsImNvbWJpbmVkUGF0aCIsInBhdGhOYW1lcyIsInNwbGl0IiwicmVsYXRpdmVQYXRoTmFtZXMiLCJsYXN0UGF0aE5hbWUiLCJmaXJzdFJlbGF0aXZlUGF0aE5hbWUiLCJzaGlmdCIsInVuZGVmaW5lZCIsInBvcCIsImNvbWJpbmVkUGF0aE5hbWVzIiwiY29uY2F0Iiwiam9pbiIsImNvbmNhdGVuYXRlUGF0aHMiLCJjb25jYXRlbmF0ZWRQYXRoIiwiYm90dG9tbW9zdE5hbWVGcm9tUGF0aCIsImJvdHRvbW1vc3ROYW1lIiwibWF0Y2hlcyIsIm1hdGNoIiwic2Vjb25kTWF0Y2giLCJ0b3Btb3N0RGlyZWN0b3J5UGF0aEZyb21QYXRoIiwidG9wbW9zdERpcmVjdG9yeVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoIiwidG9wbW9zdERpcmVjdG9yeU5hbWUiLCJwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lRnJvbVBhdGgiLCJwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lIiwicGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoIiwicGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFF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LG1CQUFYLENBQWhCOztBQUVBLE1BQUlELE9BQU8sS0FBSyxJQUFoQixFQUFzQjtBQUNwQixRQUFNRSxXQUFXLEdBQUcsbUJBQU9GLE9BQVAsQ0FBcEI7QUFFQVEsSUFBQUEseUJBQXlCLEdBQUdOLFdBQTVCLENBSG9CLENBR3FCO0FBQzFDOztBQUVELFNBQU9NLHlCQUFQO0FBQ0Q7O0FBRU0sU0FBU0MsdUNBQVQsQ0FBaUQzQyxJQUFqRCxFQUF1RDtBQUM1RCxNQUFJNEMsK0JBQStCLEdBQUcsSUFBdEM7QUFFQSxNQUFNVixPQUFPLEdBQUdsQyxJQUFJLENBQUNtQyxLQUFMLENBQVcsZ0JBQVgsQ0FBaEI7O0FBRUEsTUFBSUQsT0FBTyxLQUFLLElBQWhCLEVBQXNCO0FBQ3BCLFFBQU1FLFdBQVcsR0FBRyxtQkFBT0YsT0FBUCxDQUFwQjtBQUVBVSxJQUFBQSwrQkFBK0IsR0FBR1IsV0FBbEM7QUFDRDs7QUFFRCxTQUFPUSwrQkFBUDtBQUNEOztlQUVjO0FBQ2I3QyxFQUFBQSxVQUFVLEVBQVZBLFVBRGE7QUFFYkssRUFBQUEsaUJBQWlCLEVBQWpCQSxpQkFGYTtBQUdiSSxFQUFBQSxrQkFBa0IsRUFBbEJBLGtCQUhhO0FBSWJGLEVBQUFBLGtCQUFrQixFQUFsQkEsa0JBSmE7QUFLYkksRUFBQUEsMkJBQTJCLEVBQTNCQSwyQkFMYTtBQU1iTSxFQUFBQSxZQUFZLEVBQVpBLFlBTmE7QUFPYmMsRUFBQUEsZ0JBQWdCLEVBQWhCQSxnQkFQYTtBQVFiRSxFQUFBQSxzQkFBc0IsRUFBdEJBLHNCQVJhO0FBU2JLLEVBQUFBLDRCQUE0QixFQUE1QkEsNEJBVGE7QUFVYkUsRUFBQUEsNEJBQTRCLEVBQTVCQSw0QkFWYTtBQVdiRSxFQUFBQSxpQ0FBaUMsRUFBakNBLGlDQVhhO0FBWWJFLEVBQUFBLHVDQUF1QyxFQUF2Q0E7QUFaYSxDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBmaXJzdCwgc2Vjb25kLCBsYXN0IH0gZnJvbSAnLi4vdXRpbGl0aWVzL2FycmF5JztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aE5hbWUocGF0aCkge1xuICBwYXRoID0gcGF0aC5yZXBsYWNlKC9eXFwvLywnJykucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8vXG5cbiAgY29uc3QgcGF0aE5hbWUgPSAoL1xcLy8udGVzdChwYXRoKSA9PT0gZmFsc2UpO1xuXG4gIHJldHVybiBwYXRoTmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aFRvcG1vc3ROYW1lKHBhdGgpIHtcbiAgY29uc3QgcGF0aE5hbWUgPSBpc1BhdGhOYW1lKHBhdGgpLFxuICAgICAgICBwYXRoQWJzb2x1dGVQYXRoID0gaXNQYXRoQWJzb2x1dGVQYXRoKHBhdGgpLFxuICAgICAgICBwYXRoVG9wbW9zdE5hbWUgPSAocGF0aE5hbWUgJiYgcGF0aEFic29sdXRlUGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhUb3Btb3N0TmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aFJlbGF0aXZlUGF0aChwYXRoKSB7XG4gIGNvbnN0IHBhdGhSZWxhdGl2ZVBhdGggPSAhL15cXC8vLnRlc3QocGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhSZWxhdGl2ZVBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhBYnNvbHV0ZVBhdGgocGF0aCkge1xuICBjb25zdCBwYXRoQWJzb2x1dGVQYXRoID0gL15cXC8vLnRlc3QocGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhBYnNvbHV0ZVBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGgodG9wbW9zdE5hbWUsIGFic29sdXRlUGF0aCkge1xuICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKGBeJHt0b3Btb3N0TmFtZX0oPzpcXFxcLy4rKT8kYCksXG4gICAgICAgIHRvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGggPSByZWdFeHAudGVzdChhYnNvbHV0ZVBhdGgpO1xuXG4gIHJldHVybiB0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lUGF0aHMocGF0aCwgcmVsYXRpdmVQYXRoKSB7XG4gIGxldCBjb21iaW5lZFBhdGggPSBudWxsO1xuXG4gIGNvbnN0IHBhdGhOYW1lcyA9IHBhdGguc3BsaXQoJy8nKSxcbiAgICAgICAgcmVsYXRpdmVQYXRoTmFtZXMgPSByZWxhdGl2ZVBhdGguc3BsaXQoJy8nKTtcblxuICBsZXQgbGFzdFBhdGhOYW1lLFxuICAgICAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuXG4gIGlmIChmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPT09ICcuJykge1xuICAgIHJlbGF0aXZlUGF0aE5hbWVzLnNoaWZ0KCk7XG4gIH1cblxuICBmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPSBmaXJzdChyZWxhdGl2ZVBhdGhOYW1lcyk7XG4gIGxhc3RQYXRoTmFtZSA9IGxhc3QocGF0aE5hbWVzKTtcblxuICB3aGlsZSAoKGZpcnN0UmVsYXRpdmVQYXRoTmFtZSA9PT0gJy4uJykgJiYgKGxhc3RQYXRoTmFtZSAhPT0gdW5kZWZpbmVkKSkge1xuICAgIHJlbGF0aXZlUGF0aE5hbWVzLnNoaWZ0KCk7XG4gICAgcGF0aE5hbWVzLnBvcCgpO1xuXG4gICAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuICAgIGxhc3RQYXRoTmFtZSA9IGxhc3QocGF0aE5hbWVzKTtcbiAgfVxuXG4gIGlmIChsYXN0UGF0aE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNvbWJpbmVkUGF0aE5hbWVzID0gW10uY29uY2F0KHBhdGhOYW1lcykuY29uY2F0KHJlbGF0aXZlUGF0aE5hbWVzKTtcblxuICAgIGNvbWJpbmVkUGF0aCA9IGNvbWJpbmVkUGF0aE5hbWVzLmpvaW4oJy8nKTtcbiAgfVxuXG4gIHJldHVybiBjb21iaW5lZFBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRlbmF0ZVBhdGhzKHBhdGgsIHJlbGF0aXZlUGF0aCkge1xuICBwYXRoID0gcGF0aC5yZXBsYWNlKC9cXC8kLywgJycpOyAgLy8vXG5cbiAgY29uc3QgY29uY2F0ZW5hdGVkUGF0aCA9IGAke3BhdGh9LyR7cmVsYXRpdmVQYXRofWA7XG5cbiAgcmV0dXJuIGNvbmNhdGVuYXRlZFBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBib3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IGJvdHRvbW1vc3ROYW1lID0gbnVsbDtcblxuICBjb25zdCBtYXRjaGVzID0gcGF0aC5tYXRjaCgvXi4qXFwvKFteXFwvXStcXC8/KSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgYm90dG9tbW9zdE5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIGJvdHRvbW1vc3ROYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aChwYXRoKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4rKVxcL1teXFwvXStcXC8/JC8pLFxuICAgICAgICBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKSxcbiAgICAgICAgdG9wbW9zdERpcmVjdG9yeVBhdGggPSBzZWNvbmRNYXRjaDsgLy8vXG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aChwYXRoKSB7XG4gIGxldCB0b3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL14oW15cXC9dKylcXC8uKyQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgdG9wbW9zdERpcmVjdG9yeU5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlOYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4qKVxcL1teXFwvXStcXC8/JC8pO1xuXG4gIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XG4gICAgY29uc3Qgc2Vjb25kTWF0Y2ggPSBzZWNvbmQobWF0Y2hlcyk7XG5cbiAgICBwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lID0gc2Vjb25kTWF0Y2g7IC8vL1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgocGF0aCkge1xuICBsZXQgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL15bXlxcL10rXFwvKC4rKSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IHNlY29uZE1hdGNoO1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0VG9wbW9zdERpcmVjdG9yeU5hbWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNQYXRoTmFtZSxcbiAgaXNQYXRoVG9wbW9zdE5hbWUsXG4gIGlzUGF0aFJlbGF0aXZlUGF0aCxcbiAgaXNQYXRoQWJzb2x1dGVQYXRoLFxuICBpc1RvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGgsXG4gIGNvbWJpbmVQYXRocyxcbiAgY29uY2F0ZW5hdGVQYXRocyxcbiAgYm90dG9tbW9zdE5hbWVGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aCxcbiAgcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoLFxuICBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGhcbn07XG4iXX0=