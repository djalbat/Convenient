"use strict";

import { first, second, last } from "../utilities/array";
export function isPathName(path) {
  path = path.replace(/^\//, "").replace(/\/$/, ""); ///

  const pathName = /\//.test(path) === false;
  return pathName;
}
export function isPathTopmostName(path) {
  const pathName = isPathName(path),
        pathAbsolutePath = isPathAbsolutePath(path),
        pathTopmostName = pathName && pathAbsolutePath;
  return pathTopmostName;
}
export function isPathRelativePath(path) {
  const pathRelativePath = !/^\//.test(path);
  return pathRelativePath;
}
export function isPathAbsolutePath(path) {
  const pathAbsolutePath = /^\//.test(path);
  return pathAbsolutePath;
}
export function isTopmostNameInAbsolutePath(topmostName, absolutePath) {
  const regExp = new RegExp(`^${topmostName}(?:\\/.+)?$`),
        topmostNameInAbsolutePath = regExp.test(absolutePath);
  return topmostNameInAbsolutePath;
}
export function combinePaths(path, relativePath) {
  let combinedPath = null;
  const pathNames = path.split(/\//),
        relativePathNames = relativePath.split(/\//);
  let lastPathName,
      firstRelativePathName = first(relativePathNames);

  if (firstRelativePathName === ".") {
    relativePathNames.shift();
  }

  firstRelativePathName = first(relativePathNames);
  lastPathName = last(pathNames);

  while (firstRelativePathName === ".." && lastPathName !== undefined) {
    relativePathNames.shift();
    pathNames.pop();
    firstRelativePathName = first(relativePathNames);
    lastPathName = last(pathNames);
  }

  if (lastPathName !== undefined) {
    const combinedPathNames = [].concat(pathNames).concat(relativePathNames);
    combinedPath = combinedPathNames.join("/");
  }

  return combinedPath;
}
export function concatenatePaths(path, relativePath) {
  path = path.replace(/\/$/, ""); ///

  const concatenatedPath = `${path}/${relativePath}`;
  return concatenatedPath;
}
export function bottommostNameFromPath(path) {
  let bottommostName = null;
  const matches = path.match(/^.*\/([^\/]+\/?)$/);

  if (matches !== null) {
    const secondMatch = second(matches);
    bottommostName = secondMatch; ///
  }

  return bottommostName;
}
export function topmostDirectoryPathFromPath(path) {
  const matches = path.match(/^(.+)\/[^\/]+\/?$/),
        secondMatch = second(matches),
        topmostDirectoryPath = secondMatch; ///

  return topmostDirectoryPath;
}
export function topmostDirectoryNameFromPath(path) {
  let topmostDirectoryName = null;
  const matches = path.match(/^([^\/]+)\/.+$/);

  if (matches !== null) {
    const secondMatch = second(matches);
    topmostDirectoryName = secondMatch; ///
  }

  return topmostDirectoryName;
}
export function pathWithoutBottommostNameFromPath(path) {
  let pathWithoutBottommostName = null;
  const matches = path.match(/^(.*)\/[^\/]+\/?$/);

  if (matches !== null) {
    const secondMatch = second(matches);
    pathWithoutBottommostName = secondMatch; ///
  }

  return pathWithoutBottommostName;
}
export function pathWithoutTopmostDirectoryNameFromPath(path) {
  let pathWithoutTopmostDirectoryName = null;
  const matches = path.match(/^[^\/]+\/(.+)$/);

  if (matches !== null) {
    const secondMatch = second(matches);
    pathWithoutTopmostDirectoryName = secondMatch;
  }

  return pathWithoutTopmostDirectoryName;
}
export default {
  isPathName,
  isPathTopmostName,
  isPathRelativePath,
  isPathAbsolutePath,
  isTopmostNameInAbsolutePath,
  combinePaths,
  concatenatePaths,
  bottommostNameFromPath,
  topmostDirectoryPathFromPath,
  topmostDirectoryNameFromPath,
  pathWithoutBottommostNameFromPath,
  pathWithoutTopmostDirectoryNameFromPath
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhdGguanMiXSwibmFtZXMiOlsiZmlyc3QiLCJzZWNvbmQiLCJsYXN0IiwiaXNQYXRoTmFtZSIsInBhdGgiLCJyZXBsYWNlIiwicGF0aE5hbWUiLCJ0ZXN0IiwiaXNQYXRoVG9wbW9zdE5hbWUiLCJwYXRoQWJzb2x1dGVQYXRoIiwiaXNQYXRoQWJzb2x1dGVQYXRoIiwicGF0aFRvcG1vc3ROYW1lIiwiaXNQYXRoUmVsYXRpdmVQYXRoIiwicGF0aFJlbGF0aXZlUGF0aCIsImlzVG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aCIsInRvcG1vc3ROYW1lIiwiYWJzb2x1dGVQYXRoIiwicmVnRXhwIiwiUmVnRXhwIiwidG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aCIsImNvbWJpbmVQYXRocyIsInJlbGF0aXZlUGF0aCIsImNvbWJpbmVkUGF0aCIsInBhdGhOYW1lcyIsInNwbGl0IiwicmVsYXRpdmVQYXRoTmFtZXMiLCJsYXN0UGF0aE5hbWUiLCJmaXJzdFJlbGF0aXZlUGF0aE5hbWUiLCJzaGlmdCIsInVuZGVmaW5lZCIsInBvcCIsImNvbWJpbmVkUGF0aE5hbWVzIiwiY29uY2F0Iiwiam9pbiIsImNvbmNhdGVuYXRlUGF0aHMiLCJjb25jYXRlbmF0ZWRQYXRoIiwiYm90dG9tbW9zdE5hbWVGcm9tUGF0aCIsImJvdHRvbW1vc3ROYW1lIiwibWF0Y2hlcyIsIm1hdGNoIiwic2Vjb25kTWF0Y2giLCJ0b3Btb3N0RGlyZWN0b3J5UGF0aEZyb21QYXRoIiwidG9wbW9zdERpcmVjdG9yeVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoIiwidG9wbW9zdERpcmVjdG9yeU5hbWUiLCJwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lRnJvbVBhdGgiLCJwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lIiwicGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoIiwicGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsU0FBU0EsS0FBVCxFQUFnQkMsTUFBaEIsRUFBd0JDLElBQXhCLFFBQW9DLG9CQUFwQztBQUVBLE9BQU8sU0FBU0MsVUFBVCxDQUFvQkMsSUFBcEIsRUFBMEI7QUFDL0JBLEVBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDQyxPQUFMLENBQWEsS0FBYixFQUFtQixFQUFuQixFQUF1QkEsT0FBdkIsQ0FBK0IsS0FBL0IsRUFBc0MsRUFBdEMsQ0FBUCxDQUQrQixDQUNtQjs7QUFFbEQsUUFBTUMsUUFBUSxHQUFJLEtBQUtDLElBQUwsQ0FBVUgsSUFBVixNQUFvQixLQUF0QztBQUVBLFNBQU9FLFFBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0UsaUJBQVQsQ0FBMkJKLElBQTNCLEVBQWlDO0FBQ3RDLFFBQU1FLFFBQVEsR0FBR0gsVUFBVSxDQUFDQyxJQUFELENBQTNCO0FBQUEsUUFDTUssZ0JBQWdCLEdBQUdDLGtCQUFrQixDQUFDTixJQUFELENBRDNDO0FBQUEsUUFFTU8sZUFBZSxHQUFJTCxRQUFRLElBQUlHLGdCQUZyQztBQUlBLFNBQU9FLGVBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0Msa0JBQVQsQ0FBNEJSLElBQTVCLEVBQWtDO0FBQ3ZDLFFBQU1TLGdCQUFnQixHQUFHLENBQUMsTUFBTU4sSUFBTixDQUFXSCxJQUFYLENBQTFCO0FBRUEsU0FBT1MsZ0JBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0gsa0JBQVQsQ0FBNEJOLElBQTVCLEVBQWtDO0FBQ3ZDLFFBQU1LLGdCQUFnQixHQUFHLE1BQU1GLElBQU4sQ0FBV0gsSUFBWCxDQUF6QjtBQUVBLFNBQU9LLGdCQUFQO0FBQ0Q7QUFFRCxPQUFPLFNBQVNLLDJCQUFULENBQXFDQyxXQUFyQyxFQUFrREMsWUFBbEQsRUFBZ0U7QUFDckUsUUFBTUMsTUFBTSxHQUFHLElBQUlDLE1BQUosQ0FBWSxJQUFHSCxXQUFZLGFBQTNCLENBQWY7QUFBQSxRQUNNSSx5QkFBeUIsR0FBR0YsTUFBTSxDQUFDVixJQUFQLENBQVlTLFlBQVosQ0FEbEM7QUFHQSxTQUFPRyx5QkFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTQyxZQUFULENBQXNCaEIsSUFBdEIsRUFBNEJpQixZQUE1QixFQUEwQztBQUMvQyxNQUFJQyxZQUFZLEdBQUcsSUFBbkI7QUFFQSxRQUFNQyxTQUFTLEdBQUduQixJQUFJLENBQUNvQixLQUFMLENBQVcsSUFBWCxDQUFsQjtBQUFBLFFBQ01DLGlCQUFpQixHQUFHSixZQUFZLENBQUNHLEtBQWIsQ0FBbUIsSUFBbkIsQ0FEMUI7QUFHQSxNQUFJRSxZQUFKO0FBQUEsTUFDSUMscUJBQXFCLEdBQUczQixLQUFLLENBQUN5QixpQkFBRCxDQURqQzs7QUFHQSxNQUFJRSxxQkFBcUIsS0FBSyxHQUE5QixFQUFtQztBQUNqQ0YsSUFBQUEsaUJBQWlCLENBQUNHLEtBQWxCO0FBQ0Q7O0FBRURELEVBQUFBLHFCQUFxQixHQUFHM0IsS0FBSyxDQUFDeUIsaUJBQUQsQ0FBN0I7QUFDQUMsRUFBQUEsWUFBWSxHQUFHeEIsSUFBSSxDQUFDcUIsU0FBRCxDQUFuQjs7QUFFQSxTQUFRSSxxQkFBcUIsS0FBSyxJQUEzQixJQUFxQ0QsWUFBWSxLQUFLRyxTQUE3RCxFQUF5RTtBQUN2RUosSUFBQUEsaUJBQWlCLENBQUNHLEtBQWxCO0FBQ0FMLElBQUFBLFNBQVMsQ0FBQ08sR0FBVjtBQUVBSCxJQUFBQSxxQkFBcUIsR0FBRzNCLEtBQUssQ0FBQ3lCLGlCQUFELENBQTdCO0FBQ0FDLElBQUFBLFlBQVksR0FBR3hCLElBQUksQ0FBQ3FCLFNBQUQsQ0FBbkI7QUFDRDs7QUFFRCxNQUFJRyxZQUFZLEtBQUtHLFNBQXJCLEVBQWdDO0FBQzlCLFVBQU1FLGlCQUFpQixHQUFHLEdBQUdDLE1BQUgsQ0FBVVQsU0FBVixFQUFxQlMsTUFBckIsQ0FBNEJQLGlCQUE1QixDQUExQjtBQUVBSCxJQUFBQSxZQUFZLEdBQUdTLGlCQUFpQixDQUFDRSxJQUFsQixDQUF1QixHQUF2QixDQUFmO0FBQ0Q7O0FBRUQsU0FBT1gsWUFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTWSxnQkFBVCxDQUEwQjlCLElBQTFCLEVBQWdDaUIsWUFBaEMsRUFBOEM7QUFDbkRqQixFQUFBQSxJQUFJLEdBQUdBLElBQUksQ0FBQ0MsT0FBTCxDQUFhLEtBQWIsRUFBb0IsRUFBcEIsQ0FBUCxDQURtRCxDQUNsQjs7QUFFakMsUUFBTThCLGdCQUFnQixHQUFJLEdBQUUvQixJQUFLLElBQUdpQixZQUFhLEVBQWpEO0FBRUEsU0FBT2MsZ0JBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0Msc0JBQVQsQ0FBZ0NoQyxJQUFoQyxFQUFzQztBQUMzQyxNQUFJaUMsY0FBYyxHQUFHLElBQXJCO0FBRUEsUUFBTUMsT0FBTyxHQUFHbEMsSUFBSSxDQUFDbUMsS0FBTCxDQUFXLG1CQUFYLENBQWhCOztBQUVBLE1BQUlELE9BQU8sS0FBSyxJQUFoQixFQUFzQjtBQUNwQixVQUFNRSxXQUFXLEdBQUd2QyxNQUFNLENBQUNxQyxPQUFELENBQTFCO0FBRUFELElBQUFBLGNBQWMsR0FBR0csV0FBakIsQ0FIb0IsQ0FHVztBQUNoQzs7QUFFRCxTQUFPSCxjQUFQO0FBQ0Q7QUFFRCxPQUFPLFNBQVNJLDRCQUFULENBQXNDckMsSUFBdEMsRUFBNEM7QUFDakQsUUFBTWtDLE9BQU8sR0FBR2xDLElBQUksQ0FBQ21DLEtBQUwsQ0FBVyxtQkFBWCxDQUFoQjtBQUFBLFFBQ01DLFdBQVcsR0FBR3ZDLE1BQU0sQ0FBQ3FDLE9BQUQsQ0FEMUI7QUFBQSxRQUVNSSxvQkFBb0IsR0FBR0YsV0FGN0IsQ0FEaUQsQ0FHUDs7QUFFMUMsU0FBT0Usb0JBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0MsNEJBQVQsQ0FBc0N2QyxJQUF0QyxFQUE0QztBQUNqRCxNQUFJd0Msb0JBQW9CLEdBQUcsSUFBM0I7QUFFQSxRQUFNTixPQUFPLEdBQUdsQyxJQUFJLENBQUNtQyxLQUFMLENBQVcsZ0JBQVgsQ0FBaEI7O0FBRUEsTUFBSUQsT0FBTyxLQUFLLElBQWhCLEVBQXNCO0FBQ3BCLFVBQU1FLFdBQVcsR0FBR3ZDLE1BQU0sQ0FBQ3FDLE9BQUQsQ0FBMUI7QUFFQU0sSUFBQUEsb0JBQW9CLEdBQUdKLFdBQXZCLENBSG9CLENBR2lCO0FBQ3RDOztBQUVELFNBQU9JLG9CQUFQO0FBQ0Q7QUFFRCxPQUFPLFNBQVNDLGlDQUFULENBQTJDekMsSUFBM0MsRUFBaUQ7QUFDdEQsTUFBSTBDLHlCQUF5QixHQUFHLElBQWhDO0FBRUEsUUFBTVIsT0FBTyxHQUFHbEMsSUFBSSxDQUFDbUMsS0FBTCxDQUFXLG1CQUFYLENBQWhCOztBQUVBLE1BQUlELE9BQU8sS0FBSyxJQUFoQixFQUFzQjtBQUNwQixVQUFNRSxXQUFXLEdBQUd2QyxNQUFNLENBQUNxQyxPQUFELENBQTFCO0FBRUFRLElBQUFBLHlCQUF5QixHQUFHTixXQUE1QixDQUhvQixDQUdxQjtBQUMxQzs7QUFFRCxTQUFPTSx5QkFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTQyx1Q0FBVCxDQUFpRDNDLElBQWpELEVBQXVEO0FBQzVELE1BQUk0QywrQkFBK0IsR0FBRyxJQUF0QztBQUVBLFFBQU1WLE9BQU8sR0FBR2xDLElBQUksQ0FBQ21DLEtBQUwsQ0FBVyxnQkFBWCxDQUFoQjs7QUFFQSxNQUFJRCxPQUFPLEtBQUssSUFBaEIsRUFBc0I7QUFDcEIsVUFBTUUsV0FBVyxHQUFHdkMsTUFBTSxDQUFDcUMsT0FBRCxDQUExQjtBQUVBVSxJQUFBQSwrQkFBK0IsR0FBR1IsV0FBbEM7QUFDRDs7QUFFRCxTQUFPUSwrQkFBUDtBQUNEO0FBRUQsZUFBZTtBQUNiN0MsRUFBQUEsVUFEYTtBQUViSyxFQUFBQSxpQkFGYTtBQUdiSSxFQUFBQSxrQkFIYTtBQUliRixFQUFBQSxrQkFKYTtBQUtiSSxFQUFBQSwyQkFMYTtBQU1iTSxFQUFBQSxZQU5hO0FBT2JjLEVBQUFBLGdCQVBhO0FBUWJFLEVBQUFBLHNCQVJhO0FBU2JLLEVBQUFBLDRCQVRhO0FBVWJFLEVBQUFBLDRCQVZhO0FBV2JFLEVBQUFBLGlDQVhhO0FBWWJFLEVBQUFBO0FBWmEsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBmaXJzdCwgc2Vjb25kLCBsYXN0IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcnJheVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoTmFtZShwYXRoKSB7XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoL15cXC8vLFwiXCIpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTsgLy8vXG5cbiAgY29uc3QgcGF0aE5hbWUgPSAoL1xcLy8udGVzdChwYXRoKSA9PT0gZmFsc2UpO1xuXG4gIHJldHVybiBwYXRoTmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aFRvcG1vc3ROYW1lKHBhdGgpIHtcbiAgY29uc3QgcGF0aE5hbWUgPSBpc1BhdGhOYW1lKHBhdGgpLFxuICAgICAgICBwYXRoQWJzb2x1dGVQYXRoID0gaXNQYXRoQWJzb2x1dGVQYXRoKHBhdGgpLFxuICAgICAgICBwYXRoVG9wbW9zdE5hbWUgPSAocGF0aE5hbWUgJiYgcGF0aEFic29sdXRlUGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhUb3Btb3N0TmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aFJlbGF0aXZlUGF0aChwYXRoKSB7XG4gIGNvbnN0IHBhdGhSZWxhdGl2ZVBhdGggPSAhL15cXC8vLnRlc3QocGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhSZWxhdGl2ZVBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhBYnNvbHV0ZVBhdGgocGF0aCkge1xuICBjb25zdCBwYXRoQWJzb2x1dGVQYXRoID0gL15cXC8vLnRlc3QocGF0aCk7XG5cbiAgcmV0dXJuIHBhdGhBYnNvbHV0ZVBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGgodG9wbW9zdE5hbWUsIGFic29sdXRlUGF0aCkge1xuICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKGBeJHt0b3Btb3N0TmFtZX0oPzpcXFxcLy4rKT8kYCksXG4gICAgICAgIHRvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGggPSByZWdFeHAudGVzdChhYnNvbHV0ZVBhdGgpO1xuXG4gIHJldHVybiB0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lUGF0aHMocGF0aCwgcmVsYXRpdmVQYXRoKSB7XG4gIGxldCBjb21iaW5lZFBhdGggPSBudWxsO1xuXG4gIGNvbnN0IHBhdGhOYW1lcyA9IHBhdGguc3BsaXQoL1xcLy8pLFxuICAgICAgICByZWxhdGl2ZVBhdGhOYW1lcyA9IHJlbGF0aXZlUGF0aC5zcGxpdCgvXFwvLyk7XG5cbiAgbGV0IGxhc3RQYXRoTmFtZSxcbiAgICAgIGZpcnN0UmVsYXRpdmVQYXRoTmFtZSA9IGZpcnN0KHJlbGF0aXZlUGF0aE5hbWVzKTtcblxuICBpZiAoZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID09PSBcIi5cIikge1xuICAgIHJlbGF0aXZlUGF0aE5hbWVzLnNoaWZ0KCk7XG4gIH1cblxuICBmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPSBmaXJzdChyZWxhdGl2ZVBhdGhOYW1lcyk7XG4gIGxhc3RQYXRoTmFtZSA9IGxhc3QocGF0aE5hbWVzKTtcblxuICB3aGlsZSAoKGZpcnN0UmVsYXRpdmVQYXRoTmFtZSA9PT0gXCIuLlwiKSAmJiAobGFzdFBhdGhOYW1lICE9PSB1bmRlZmluZWQpKSB7XG4gICAgcmVsYXRpdmVQYXRoTmFtZXMuc2hpZnQoKTtcbiAgICBwYXRoTmFtZXMucG9wKCk7XG5cbiAgICBmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPSBmaXJzdChyZWxhdGl2ZVBhdGhOYW1lcyk7XG4gICAgbGFzdFBhdGhOYW1lID0gbGFzdChwYXRoTmFtZXMpO1xuICB9XG5cbiAgaWYgKGxhc3RQYXRoTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgY29tYmluZWRQYXRoTmFtZXMgPSBbXS5jb25jYXQocGF0aE5hbWVzKS5jb25jYXQocmVsYXRpdmVQYXRoTmFtZXMpO1xuXG4gICAgY29tYmluZWRQYXRoID0gY29tYmluZWRQYXRoTmFtZXMuam9pbihcIi9cIik7XG4gIH1cblxuICByZXR1cm4gY29tYmluZWRQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uY2F0ZW5hdGVQYXRocyhwYXRoLCByZWxhdGl2ZVBhdGgpIHtcbiAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXFwvJC8sIFwiXCIpOyAgLy8vXG5cbiAgY29uc3QgY29uY2F0ZW5hdGVkUGF0aCA9IGAke3BhdGh9LyR7cmVsYXRpdmVQYXRofWA7XG5cbiAgcmV0dXJuIGNvbmNhdGVuYXRlZFBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBib3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IGJvdHRvbW1vc3ROYW1lID0gbnVsbDtcblxuICBjb25zdCBtYXRjaGVzID0gcGF0aC5tYXRjaCgvXi4qXFwvKFteXFwvXStcXC8/KSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgYm90dG9tbW9zdE5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIGJvdHRvbW1vc3ROYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aChwYXRoKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4rKVxcL1teXFwvXStcXC8/JC8pLFxuICAgICAgICBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKSxcbiAgICAgICAgdG9wbW9zdERpcmVjdG9yeVBhdGggPSBzZWNvbmRNYXRjaDsgLy8vXG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aChwYXRoKSB7XG4gIGxldCB0b3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL14oW15cXC9dKylcXC8uKyQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgdG9wbW9zdERpcmVjdG9yeU5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlOYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4qKVxcL1teXFwvXStcXC8/JC8pO1xuXG4gIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XG4gICAgY29uc3Qgc2Vjb25kTWF0Y2ggPSBzZWNvbmQobWF0Y2hlcyk7XG5cbiAgICBwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lID0gc2Vjb25kTWF0Y2g7IC8vL1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgocGF0aCkge1xuICBsZXQgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL15bXlxcL10rXFwvKC4rKSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IHNlY29uZE1hdGNoO1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0VG9wbW9zdERpcmVjdG9yeU5hbWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNQYXRoTmFtZSxcbiAgaXNQYXRoVG9wbW9zdE5hbWUsXG4gIGlzUGF0aFJlbGF0aXZlUGF0aCxcbiAgaXNQYXRoQWJzb2x1dGVQYXRoLFxuICBpc1RvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGgsXG4gIGNvbWJpbmVQYXRocyxcbiAgY29uY2F0ZW5hdGVQYXRocyxcbiAgYm90dG9tbW9zdE5hbWVGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aCxcbiAgcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoLFxuICBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGhcbn07XG4iXX0=