"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isPathName = isPathName;
exports.isPathTopmostName = isPathTopmostName;
exports.isPathRelativePath = isPathRelativePath;
exports.isPathAbsolutePath = isPathAbsolutePath;
exports.isTopmostNameInAbsolutePath = isTopmostNameInAbsolutePath;
exports.combinePaths = combinePaths;
exports.concatenatePaths = concatenatePaths;
exports.bottommostNameFromPath = bottommostNameFromPath;
exports.topmostDirectoryPathFromPath = topmostDirectoryPathFromPath;
exports.topmostDirectoryNameFromPath = topmostDirectoryNameFromPath;
exports.pathWithoutBottommostNameFromPath = pathWithoutBottommostNameFromPath;
exports.pathWithoutTopmostDirectoryNameFromPath = pathWithoutTopmostDirectoryNameFromPath;
exports["default"] = void 0;

var _array = require("../utilities/array");

function isPathName(path) {
  path = path.replace(/^\//, "").replace(/\/$/, ""); ///

  var pathName = /\//.test(path) === false;
  return pathName;
}

function isPathTopmostName(path) {
  var pathName = isPathName(path),
      pathAbsolutePath = isPathAbsolutePath(path),
      pathTopmostName = pathName && pathAbsolutePath;
  return pathTopmostName;
}

function isPathRelativePath(path) {
  var pathRelativePath = !/^\//.test(path);
  return pathRelativePath;
}

function isPathAbsolutePath(path) {
  var pathAbsolutePath = /^\//.test(path);
  return pathAbsolutePath;
}

function isTopmostNameInAbsolutePath(topmostName, absolutePath) {
  var regExp = new RegExp("^".concat(topmostName, "(?:\\/.+)?$")),
      topmostNameInAbsolutePath = regExp.test(absolutePath);
  return topmostNameInAbsolutePath;
}

function combinePaths(path, relativePath) {
  var combinedPath = null;
  var pathNames = path.split(/\//),
      relativePathNames = relativePath.split(/\//);
  var lastPathName,
      firstRelativePathName = (0, _array.first)(relativePathNames);

  if (firstRelativePathName === ".") {
    relativePathNames.shift();
  }

  firstRelativePathName = (0, _array.first)(relativePathNames);
  lastPathName = (0, _array.last)(pathNames);

  while (firstRelativePathName === ".." && lastPathName !== undefined) {
    relativePathNames.shift();
    pathNames.pop();
    firstRelativePathName = (0, _array.first)(relativePathNames);
    lastPathName = (0, _array.last)(pathNames);
  }

  if (lastPathName !== undefined) {
    var combinedPathNames = [].concat(pathNames).concat(relativePathNames);
    combinedPath = combinedPathNames.join("/");
  }

  return combinedPath;
}

function concatenatePaths(path, relativePath) {
  path = path.replace(/\/$/, ""); ///

  var concatenatedPath = "".concat(path, "/").concat(relativePath);
  return concatenatedPath;
}

function bottommostNameFromPath(path) {
  var bottommostName = null;
  var matches = path.match(/^.*\/([^\/]+\/?)$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    bottommostName = secondMatch; ///
  }

  return bottommostName;
}

function topmostDirectoryPathFromPath(path) {
  var matches = path.match(/^(.+)\/[^\/]+\/?$/),
      secondMatch = (0, _array.second)(matches),
      topmostDirectoryPath = secondMatch; ///

  return topmostDirectoryPath;
}

function topmostDirectoryNameFromPath(path) {
  var topmostDirectoryName = null;
  var matches = path.match(/^([^\/]+)\/.+$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    topmostDirectoryName = secondMatch; ///
  }

  return topmostDirectoryName;
}

function pathWithoutBottommostNameFromPath(path) {
  var pathWithoutBottommostName = null;
  var matches = path.match(/^(.*)\/[^\/]+\/?$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    pathWithoutBottommostName = secondMatch; ///
  }

  return pathWithoutBottommostName;
}

function pathWithoutTopmostDirectoryNameFromPath(path) {
  var pathWithoutTopmostDirectoryName = null;
  var matches = path.match(/^[^\/]+\/(.+)$/);

  if (matches !== null) {
    var secondMatch = (0, _array.second)(matches);
    pathWithoutTopmostDirectoryName = secondMatch;
  }

  return pathWithoutTopmostDirectoryName;
}

var _default = {
  isPathName: isPathName,
  isPathTopmostName: isPathTopmostName,
  isPathRelativePath: isPathRelativePath,
  isPathAbsolutePath: isPathAbsolutePath,
  isTopmostNameInAbsolutePath: isTopmostNameInAbsolutePath,
  combinePaths: combinePaths,
  concatenatePaths: concatenatePaths,
  bottommostNameFromPath: bottommostNameFromPath,
  topmostDirectoryPathFromPath: topmostDirectoryPathFromPath,
  topmostDirectoryNameFromPath: topmostDirectoryNameFromPath,
  pathWithoutBottommostNameFromPath: pathWithoutBottommostNameFromPath,
  pathWithoutTopmostDirectoryNameFromPath: pathWithoutTopmostDirectoryNameFromPath
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvcGF0aC5qcyJdLCJuYW1lcyI6WyJpc1BhdGhOYW1lIiwicGF0aCIsInJlcGxhY2UiLCJwYXRoTmFtZSIsInRlc3QiLCJpc1BhdGhUb3Btb3N0TmFtZSIsInBhdGhBYnNvbHV0ZVBhdGgiLCJpc1BhdGhBYnNvbHV0ZVBhdGgiLCJwYXRoVG9wbW9zdE5hbWUiLCJpc1BhdGhSZWxhdGl2ZVBhdGgiLCJwYXRoUmVsYXRpdmVQYXRoIiwiaXNUb3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoIiwidG9wbW9zdE5hbWUiLCJhYnNvbHV0ZVBhdGgiLCJyZWdFeHAiLCJSZWdFeHAiLCJ0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoIiwiY29tYmluZVBhdGhzIiwicmVsYXRpdmVQYXRoIiwiY29tYmluZWRQYXRoIiwicGF0aE5hbWVzIiwic3BsaXQiLCJyZWxhdGl2ZVBhdGhOYW1lcyIsImxhc3RQYXRoTmFtZSIsImZpcnN0UmVsYXRpdmVQYXRoTmFtZSIsInNoaWZ0IiwidW5kZWZpbmVkIiwicG9wIiwiY29tYmluZWRQYXRoTmFtZXMiLCJjb25jYXQiLCJqb2luIiwiY29uY2F0ZW5hdGVQYXRocyIsImNvbmNhdGVuYXRlZFBhdGgiLCJib3R0b21tb3N0TmFtZUZyb21QYXRoIiwiYm90dG9tbW9zdE5hbWUiLCJtYXRjaGVzIiwibWF0Y2giLCJzZWNvbmRNYXRjaCIsInRvcG1vc3REaXJlY3RvcnlQYXRoRnJvbVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5UGF0aCIsInRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5TmFtZSIsInBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWVGcm9tUGF0aCIsInBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWUiLCJwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgiLCJwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7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QUFJLENBQUNtQyxLQUFMLENBQVcsbUJBQVgsQ0FBaEI7O0FBRUEsTUFBSUQsT0FBTyxLQUFLLElBQWhCLEVBQXNCO0FBQ3BCLFFBQU1FLFdBQVcsR0FBRyxtQkFBT0YsT0FBUCxDQUFwQjtBQUVBUSxJQUFBQSx5QkFBeUIsR0FBR04sV0FBNUIsQ0FIb0IsQ0FHcUI7QUFDMUM7O0FBRUQsU0FBT00seUJBQVA7QUFDRDs7QUFFTSxTQUFTQyx1Q0FBVCxDQUFpRDNDLElBQWpELEVBQXVEO0FBQzVELE1BQUk0QywrQkFBK0IsR0FBRyxJQUF0QztBQUVBLE1BQU1WLE9BQU8sR0FBR2xDLElBQUksQ0FBQ21DLEtBQUwsQ0FBVyxnQkFBWCxDQUFoQjs7QUFFQSxNQUFJRCxPQUFPLEtBQUssSUFBaEIsRUFBc0I7QUFDcEIsUUFBTUUsV0FBVyxHQUFHLG1CQUFPRixPQUFQLENBQXBCO0FBRUFVLElBQUFBLCtCQUErQixHQUFHUixXQUFsQztBQUNEOztBQUVELFNBQU9RLCtCQUFQO0FBQ0Q7O2VBRWM7QUFDYjdDLEVBQUFBLFVBQVUsRUFBVkEsVUFEYTtBQUViSyxFQUFBQSxpQkFBaUIsRUFBakJBLGlCQUZhO0FBR2JJLEVBQUFBLGtCQUFrQixFQUFsQkEsa0JBSGE7QUFJYkYsRUFBQUEsa0JBQWtCLEVBQWxCQSxrQkFKYTtBQUtiSSxFQUFBQSwyQkFBMkIsRUFBM0JBLDJCQUxhO0FBTWJNLEVBQUFBLFlBQVksRUFBWkEsWUFOYTtBQU9iYyxFQUFBQSxnQkFBZ0IsRUFBaEJBLGdCQVBhO0FBUWJFLEVBQUFBLHNCQUFzQixFQUF0QkEsc0JBUmE7QUFTYkssRUFBQUEsNEJBQTRCLEVBQTVCQSw0QkFUYTtBQVViRSxFQUFBQSw0QkFBNEIsRUFBNUJBLDRCQVZhO0FBV2JFLEVBQUFBLGlDQUFpQyxFQUFqQ0EsaUNBWGE7QUFZYkUsRUFBQUEsdUNBQXVDLEVBQXZDQTtBQVphLEMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgZmlyc3QsIHNlY29uZCwgbGFzdCB9IGZyb20gXCIuLi91dGlsaXRpZXMvYXJyYXlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzUGF0aE5hbWUocGF0aCkge1xuICBwYXRoID0gcGF0aC5yZXBsYWNlKC9eXFwvLyxcIlwiKS5yZXBsYWNlKC9cXC8kLywgXCJcIik7IC8vL1xuXG4gIGNvbnN0IHBhdGhOYW1lID0gKC9cXC8vLnRlc3QocGF0aCkgPT09IGZhbHNlKTtcblxuICByZXR1cm4gcGF0aE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhUb3Btb3N0TmFtZShwYXRoKSB7XG4gIGNvbnN0IHBhdGhOYW1lID0gaXNQYXRoTmFtZShwYXRoKSxcbiAgICAgICAgcGF0aEFic29sdXRlUGF0aCA9IGlzUGF0aEFic29sdXRlUGF0aChwYXRoKSxcbiAgICAgICAgcGF0aFRvcG1vc3ROYW1lID0gKHBhdGhOYW1lICYmIHBhdGhBYnNvbHV0ZVBhdGgpO1xuXG4gIHJldHVybiBwYXRoVG9wbW9zdE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhSZWxhdGl2ZVBhdGgocGF0aCkge1xuICBjb25zdCBwYXRoUmVsYXRpdmVQYXRoID0gIS9eXFwvLy50ZXN0KHBhdGgpO1xuXG4gIHJldHVybiBwYXRoUmVsYXRpdmVQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoQWJzb2x1dGVQYXRoKHBhdGgpIHtcbiAgY29uc3QgcGF0aEFic29sdXRlUGF0aCA9IC9eXFwvLy50ZXN0KHBhdGgpO1xuXG4gIHJldHVybiBwYXRoQWJzb2x1dGVQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUb3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoKHRvcG1vc3ROYW1lLCBhYnNvbHV0ZVBhdGgpIHtcbiAgY29uc3QgcmVnRXhwID0gbmV3IFJlZ0V4cChgXiR7dG9wbW9zdE5hbWV9KD86XFxcXC8uKyk/JGApLFxuICAgICAgICB0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoID0gcmVnRXhwLnRlc3QoYWJzb2x1dGVQYXRoKTtcblxuICByZXR1cm4gdG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZVBhdGhzKHBhdGgsIHJlbGF0aXZlUGF0aCkge1xuICBsZXQgY29tYmluZWRQYXRoID0gbnVsbDtcblxuICBjb25zdCBwYXRoTmFtZXMgPSBwYXRoLnNwbGl0KC9cXC8vKSxcbiAgICAgICAgcmVsYXRpdmVQYXRoTmFtZXMgPSByZWxhdGl2ZVBhdGguc3BsaXQoL1xcLy8pO1xuXG4gIGxldCBsYXN0UGF0aE5hbWUsXG4gICAgICBmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPSBmaXJzdChyZWxhdGl2ZVBhdGhOYW1lcyk7XG5cbiAgaWYgKGZpcnN0UmVsYXRpdmVQYXRoTmFtZSA9PT0gXCIuXCIpIHtcbiAgICByZWxhdGl2ZVBhdGhOYW1lcy5zaGlmdCgpO1xuICB9XG5cbiAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuICBsYXN0UGF0aE5hbWUgPSBsYXN0KHBhdGhOYW1lcyk7XG5cbiAgd2hpbGUgKChmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPT09IFwiLi5cIikgJiYgKGxhc3RQYXRoTmFtZSAhPT0gdW5kZWZpbmVkKSkge1xuICAgIHJlbGF0aXZlUGF0aE5hbWVzLnNoaWZ0KCk7XG4gICAgcGF0aE5hbWVzLnBvcCgpO1xuXG4gICAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuICAgIGxhc3RQYXRoTmFtZSA9IGxhc3QocGF0aE5hbWVzKTtcbiAgfVxuXG4gIGlmIChsYXN0UGF0aE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNvbWJpbmVkUGF0aE5hbWVzID0gW10uY29uY2F0KHBhdGhOYW1lcykuY29uY2F0KHJlbGF0aXZlUGF0aE5hbWVzKTtcblxuICAgIGNvbWJpbmVkUGF0aCA9IGNvbWJpbmVkUGF0aE5hbWVzLmpvaW4oXCIvXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNvbWJpbmVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdGVuYXRlUGF0aHMocGF0aCwgcmVsYXRpdmVQYXRoKSB7XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLyQvLCBcIlwiKTsgIC8vL1xuXG4gIGNvbnN0IGNvbmNhdGVuYXRlZFBhdGggPSBgJHtwYXRofS8ke3JlbGF0aXZlUGF0aH1gO1xuXG4gIHJldHVybiBjb25jYXRlbmF0ZWRQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYm90dG9tbW9zdE5hbWVGcm9tUGF0aChwYXRoKSB7XG4gIGxldCBib3R0b21tb3N0TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL14uKlxcLyhbXlxcL10rXFwvPykkLyk7XG5cbiAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICBjb25zdCBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKTtcblxuICAgIGJvdHRvbW1vc3ROYW1lID0gc2Vjb25kTWF0Y2g7ICAvLy9cbiAgfVxuXG4gIHJldHVybiBib3R0b21tb3N0TmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvcG1vc3REaXJlY3RvcnlQYXRoRnJvbVBhdGgocGF0aCkge1xuICBjb25zdCBtYXRjaGVzID0gcGF0aC5tYXRjaCgvXiguKylcXC9bXlxcL10rXFwvPyQvKSxcbiAgICAgICAgc2Vjb25kTWF0Y2ggPSBzZWNvbmQobWF0Y2hlcyksXG4gICAgICAgIHRvcG1vc3REaXJlY3RvcnlQYXRoID0gc2Vjb25kTWF0Y2g7IC8vL1xuXG4gIHJldHVybiB0b3Btb3N0RGlyZWN0b3J5UGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgocGF0aCkge1xuICBsZXQgdG9wbW9zdERpcmVjdG9yeU5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKFteXFwvXSspXFwvLiskLyk7XG5cbiAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICBjb25zdCBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKTtcblxuICAgIHRvcG1vc3REaXJlY3RvcnlOYW1lID0gc2Vjb25kTWF0Y2g7ICAvLy9cbiAgfVxuXG4gIHJldHVybiB0b3Btb3N0RGlyZWN0b3J5TmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWVGcm9tUGF0aChwYXRoKSB7XG4gIGxldCBwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lID0gbnVsbDtcblxuICBjb25zdCBtYXRjaGVzID0gcGF0aC5tYXRjaCgvXiguKilcXC9bXlxcL10rXFwvPyQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZSA9IHNlY29uZE1hdGNoOyAvLy9cbiAgfVxuXG4gIHJldHVybiBwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhXaXRob3V0VG9wbW9zdERpcmVjdG9yeU5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eW15cXC9dK1xcLyguKykkLyk7XG5cbiAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICBjb25zdCBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKTtcblxuICAgIHBhdGhXaXRob3V0VG9wbW9zdERpcmVjdG9yeU5hbWUgPSBzZWNvbmRNYXRjaDtcbiAgfVxuXG4gIHJldHVybiBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlzUGF0aE5hbWUsXG4gIGlzUGF0aFRvcG1vc3ROYW1lLFxuICBpc1BhdGhSZWxhdGl2ZVBhdGgsXG4gIGlzUGF0aEFic29sdXRlUGF0aCxcbiAgaXNUb3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoLFxuICBjb21iaW5lUGF0aHMsXG4gIGNvbmNhdGVuYXRlUGF0aHMsXG4gIGJvdHRvbW1vc3ROYW1lRnJvbVBhdGgsXG4gIHRvcG1vc3REaXJlY3RvcnlQYXRoRnJvbVBhdGgsXG4gIHRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgsXG4gIHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWVGcm9tUGF0aCxcbiAgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZUZyb21QYXRoXG59O1xuIl19