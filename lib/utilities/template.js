"use strict";

import { readFile } from "../utilities/fileSystem";
export function parseFile(filePath, args, regex) {
  const content = readFile(filePath),
        parsedContent = parseContent(content, args, regex);
  return parsedContent;
}
export function parseContent(content, args, regex) {
  const lines = content.split("\n"),
        parsedLines = parseLines(lines, args, regex),
        parsedContent = parsedLines.join("\n");
  return parsedContent;
}
export function parseLine(line, args, regex = /\${(.+?)}/g) {
  const parsedLine = line.replace(regex, (match, token) => {
    const parsedToken = parseToken(token, args);
    return parsedToken;
  });
  return parsedLine;
}
export default {
  parseFile,
  parseContent,
  parseLine
};

function parseLines(lines, args, regex) {
  const parsedLines = lines.map(line => {
    const parsedLine = parseLine(line, args, regex);
    return parsedLine;
  });
  return parsedLines;
}

function parseToken(token, args) {
  let parsedToken = "";

  if (args.hasOwnProperty(token)) {
    parsedToken = args[token];
  }

  return parsedToken;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbInJlYWRGaWxlIiwicGFyc2VGaWxlIiwiZmlsZVBhdGgiLCJhcmdzIiwicmVnZXgiLCJjb250ZW50IiwicGFyc2VkQ29udGVudCIsInBhcnNlQ29udGVudCIsImxpbmVzIiwic3BsaXQiLCJwYXJzZWRMaW5lcyIsInBhcnNlTGluZXMiLCJqb2luIiwicGFyc2VMaW5lIiwibGluZSIsInBhcnNlZExpbmUiLCJyZXBsYWNlIiwibWF0Y2giLCJ0b2tlbiIsInBhcnNlZFRva2VuIiwicGFyc2VUb2tlbiIsIm1hcCIsImhhc093blByb3BlcnR5Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxTQUFTQSxRQUFULFFBQXlCLHlCQUF6QjtBQUVBLE9BQU8sU0FBU0MsU0FBVCxDQUFtQkMsUUFBbkIsRUFBNkJDLElBQTdCLEVBQW1DQyxLQUFuQyxFQUEwQztBQUMvQyxRQUFNQyxPQUFPLEdBQUdMLFFBQVEsQ0FBQ0UsUUFBRCxDQUF4QjtBQUFBLFFBQ01JLGFBQWEsR0FBR0MsWUFBWSxDQUFDRixPQUFELEVBQVVGLElBQVYsRUFBZ0JDLEtBQWhCLENBRGxDO0FBR0EsU0FBT0UsYUFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTQyxZQUFULENBQXNCRixPQUF0QixFQUErQkYsSUFBL0IsRUFBcUNDLEtBQXJDLEVBQTRDO0FBQ2pELFFBQU1JLEtBQUssR0FBR0gsT0FBTyxDQUFDSSxLQUFSLENBQWMsSUFBZCxDQUFkO0FBQUEsUUFDTUMsV0FBVyxHQUFHQyxVQUFVLENBQUNILEtBQUQsRUFBUUwsSUFBUixFQUFjQyxLQUFkLENBRDlCO0FBQUEsUUFFTUUsYUFBYSxHQUFHSSxXQUFXLENBQUNFLElBQVosQ0FBaUIsSUFBakIsQ0FGdEI7QUFJQSxTQUFPTixhQUFQO0FBQ0Q7QUFFRCxPQUFPLFNBQVNPLFNBQVQsQ0FBbUJDLElBQW5CLEVBQXlCWCxJQUF6QixFQUErQkMsS0FBSyxHQUFHLFlBQXZDLEVBQXFEO0FBQzFELFFBQU1XLFVBQVUsR0FBR0QsSUFBSSxDQUFDRSxPQUFMLENBQWFaLEtBQWIsRUFBb0IsQ0FBQ2EsS0FBRCxFQUFRQyxLQUFSLEtBQWtCO0FBQ3ZELFVBQU1DLFdBQVcsR0FBR0MsVUFBVSxDQUFDRixLQUFELEVBQVFmLElBQVIsQ0FBOUI7QUFFQSxXQUFPZ0IsV0FBUDtBQUNELEdBSmtCLENBQW5CO0FBTUEsU0FBT0osVUFBUDtBQUNEO0FBRUQsZUFBZTtBQUNiZCxFQUFBQSxTQURhO0FBRWJNLEVBQUFBLFlBRmE7QUFHYk0sRUFBQUE7QUFIYSxDQUFmOztBQU1BLFNBQVNGLFVBQVQsQ0FBb0JILEtBQXBCLEVBQTJCTCxJQUEzQixFQUFpQ0MsS0FBakMsRUFBd0M7QUFDdEMsUUFBTU0sV0FBVyxHQUFHRixLQUFLLENBQUNhLEdBQU4sQ0FBV1AsSUFBRCxJQUFVO0FBQ3RDLFVBQU1DLFVBQVUsR0FBR0YsU0FBUyxDQUFDQyxJQUFELEVBQU9YLElBQVAsRUFBYUMsS0FBYixDQUE1QjtBQUVBLFdBQU9XLFVBQVA7QUFDRCxHQUptQixDQUFwQjtBQU1BLFNBQU9MLFdBQVA7QUFDRDs7QUFFRCxTQUFTVSxVQUFULENBQW9CRixLQUFwQixFQUEyQmYsSUFBM0IsRUFBaUM7QUFDL0IsTUFBSWdCLFdBQVcsR0FBRyxFQUFsQjs7QUFFQSxNQUFJaEIsSUFBSSxDQUFDbUIsY0FBTCxDQUFvQkosS0FBcEIsQ0FBSixFQUFnQztBQUM5QkMsSUFBQUEsV0FBVyxHQUFHaEIsSUFBSSxDQUFDZSxLQUFELENBQWxCO0FBQ0Q7O0FBRUQsU0FBT0MsV0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHJlYWRGaWxlIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9maWxlU3lzdGVtXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZpbGUoZmlsZVBhdGgsIGFyZ3MsIHJlZ2V4KSB7XG4gIGNvbnN0IGNvbnRlbnQgPSByZWFkRmlsZShmaWxlUGF0aCksXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZUNvbnRlbnQoY29udGVudCwgYXJncywgcmVnZXgpO1xuXG4gIHJldHVybiBwYXJzZWRDb250ZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDb250ZW50KGNvbnRlbnQsIGFyZ3MsIHJlZ2V4KSB7XG4gIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdChcIlxcblwiKSxcbiAgICAgICAgcGFyc2VkTGluZXMgPSBwYXJzZUxpbmVzKGxpbmVzLCBhcmdzLCByZWdleCksXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZWRMaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gIHJldHVybiBwYXJzZWRDb250ZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VMaW5lKGxpbmUsIGFyZ3MsIHJlZ2V4ID0gL1xcJHsoLis/KX0vZykge1xuICBjb25zdCBwYXJzZWRMaW5lID0gbGluZS5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gsIHRva2VuKSA9PiB7XG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBwYXJzZVRva2VuKHRva2VuLCBhcmdzKTtcblxuICAgIHJldHVybiBwYXJzZWRUb2tlbjtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZExpbmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcGFyc2VGaWxlLFxuICBwYXJzZUNvbnRlbnQsXG4gIHBhcnNlTGluZVxufTtcblxuZnVuY3Rpb24gcGFyc2VMaW5lcyhsaW5lcywgYXJncywgcmVnZXgpIHtcbiAgY29uc3QgcGFyc2VkTGluZXMgPSBsaW5lcy5tYXAoKGxpbmUpID0+IHtcbiAgICBjb25zdCBwYXJzZWRMaW5lID0gcGFyc2VMaW5lKGxpbmUsIGFyZ3MsIHJlZ2V4KTtcblxuICAgIHJldHVybiBwYXJzZWRMaW5lO1xuICB9KTtcblxuICByZXR1cm4gcGFyc2VkTGluZXM7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW4odG9rZW4sIGFyZ3MpIHtcbiAgbGV0IHBhcnNlZFRva2VuID0gXCJcIjtcblxuICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eSh0b2tlbikpIHtcbiAgICBwYXJzZWRUb2tlbiA9IGFyZ3NbdG9rZW5dO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlZFRva2VuO1xufVxuIl19