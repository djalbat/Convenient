'use strict';

var fileSystemUtilities = require('../utilities/fileSystem');

var readFile = fileSystemUtilities.readFile;


function parseFile(filePath, args) {
  var content = readFile(filePath),
      parsedContent = parseContent(content, args);

  return parsedContent;
}

function parseContent(content, args) {
  var lines = content.split('\n'),
      parsedLines = parseLines(lines, args),
      parsedContent = parsedLines.join('\n');

  return parsedContent;
}

function parseLine(line, args) {
  var parsedLine = line.replace(/\$\{(.+?)\}/g, function (match, token) {
    var parsedToken = parseToken(token, args);

    return parsedToken;
  });

  return parsedLine;
}

module.exports = {
  parseFile: parseFile,
  parseContent: parseContent,
  parseLine: parseLine
};

function parseLines(lines, args) {
  var parsedLines = lines.map(function (line) {
    var parsedLine = parseLine(line, args);

    return parsedLine;
  });

  return parsedLines;
}

function parseToken(token, args) {
  var parsedToken = '';

  if (args.hasOwnProperty(token)) {
    parsedToken = args[token];
  }

  return parsedToken;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvdGVtcGxhdGUuanMiXSwibmFtZXMiOlsiZmlsZVN5c3RlbVV0aWxpdGllcyIsInJlcXVpcmUiLCJyZWFkRmlsZSIsInBhcnNlRmlsZSIsImZpbGVQYXRoIiwiYXJncyIsImNvbnRlbnQiLCJwYXJzZWRDb250ZW50IiwicGFyc2VDb250ZW50IiwibGluZXMiLCJzcGxpdCIsInBhcnNlZExpbmVzIiwicGFyc2VMaW5lcyIsImpvaW4iLCJwYXJzZUxpbmUiLCJsaW5lIiwicGFyc2VkTGluZSIsInJlcGxhY2UiLCJtYXRjaCIsInRva2VuIiwicGFyc2VkVG9rZW4iLCJwYXJzZVRva2VuIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1hcCIsImhhc093blByb3BlcnR5Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxzQkFBc0JDLFFBQVEseUJBQVIsQ0FBNUI7O0lBRVFDLFEsR0FBYUYsbUIsQ0FBYkUsUTs7O0FBRVIsU0FBU0MsU0FBVCxDQUFtQkMsUUFBbkIsRUFBNkJDLElBQTdCLEVBQW1DO0FBQ2pDLE1BQU1DLFVBQVVKLFNBQVNFLFFBQVQsQ0FBaEI7QUFBQSxNQUNNRyxnQkFBZ0JDLGFBQWFGLE9BQWIsRUFBc0JELElBQXRCLENBRHRCOztBQUdBLFNBQU9FLGFBQVA7QUFDRDs7QUFFRCxTQUFTQyxZQUFULENBQXNCRixPQUF0QixFQUErQkQsSUFBL0IsRUFBcUM7QUFDbkMsTUFBTUksUUFBUUgsUUFBUUksS0FBUixDQUFjLElBQWQsQ0FBZDtBQUFBLE1BQ01DLGNBQWNDLFdBQVdILEtBQVgsRUFBa0JKLElBQWxCLENBRHBCO0FBQUEsTUFFTUUsZ0JBQWdCSSxZQUFZRSxJQUFaLENBQWlCLElBQWpCLENBRnRCOztBQUlBLFNBQU9OLGFBQVA7QUFDRDs7QUFFRCxTQUFTTyxTQUFULENBQW1CQyxJQUFuQixFQUF5QlYsSUFBekIsRUFBK0I7QUFDN0IsTUFBTVcsYUFBYUQsS0FBS0UsT0FBTCxDQUFhLGNBQWIsRUFBNkIsVUFBU0MsS0FBVCxFQUFnQkMsS0FBaEIsRUFBdUI7QUFDckUsUUFBTUMsY0FBY0MsV0FBV0YsS0FBWCxFQUFrQmQsSUFBbEIsQ0FBcEI7O0FBRUEsV0FBT2UsV0FBUDtBQUNELEdBSmtCLENBQW5COztBQU1BLFNBQU9KLFVBQVA7QUFDRDs7QUFFRE0sT0FBT0MsT0FBUCxHQUFpQjtBQUNmcEIsYUFBV0EsU0FESTtBQUVmSyxnQkFBY0EsWUFGQztBQUdmTSxhQUFXQTtBQUhJLENBQWpCOztBQU1BLFNBQVNGLFVBQVQsQ0FBb0JILEtBQXBCLEVBQTJCSixJQUEzQixFQUFpQztBQUMvQixNQUFNTSxjQUFjRixNQUFNZSxHQUFOLENBQVUsVUFBU1QsSUFBVCxFQUFlO0FBQzNDLFFBQU1DLGFBQWFGLFVBQVVDLElBQVYsRUFBZ0JWLElBQWhCLENBQW5COztBQUVBLFdBQU9XLFVBQVA7QUFDRCxHQUptQixDQUFwQjs7QUFNQSxTQUFPTCxXQUFQO0FBQ0Q7O0FBRUQsU0FBU1UsVUFBVCxDQUFvQkYsS0FBcEIsRUFBMkJkLElBQTNCLEVBQWlDO0FBQy9CLE1BQUllLGNBQWMsRUFBbEI7O0FBRUEsTUFBSWYsS0FBS29CLGNBQUwsQ0FBb0JOLEtBQXBCLENBQUosRUFBZ0M7QUFDOUJDLGtCQUFjZixLQUFLYyxLQUFMLENBQWQ7QUFDRDs7QUFFRCxTQUFPQyxXQUFQO0FBQ0QiLCJmaWxlIjoidGVtcGxhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGZpbGVTeXN0ZW1VdGlsaXRpZXMgPSByZXF1aXJlKCcuLi91dGlsaXRpZXMvZmlsZVN5c3RlbScpO1xuXG5jb25zdCB7IHJlYWRGaWxlIH0gPSBmaWxlU3lzdGVtVXRpbGl0aWVzO1xuXG5mdW5jdGlvbiBwYXJzZUZpbGUoZmlsZVBhdGgsIGFyZ3MpIHtcbiAgY29uc3QgY29udGVudCA9IHJlYWRGaWxlKGZpbGVQYXRoKSxcbiAgICAgICAgcGFyc2VkQ29udGVudCA9IHBhcnNlQ29udGVudChjb250ZW50LCBhcmdzKTtcblxuICByZXR1cm4gcGFyc2VkQ29udGVudDtcbn1cblxuZnVuY3Rpb24gcGFyc2VDb250ZW50KGNvbnRlbnQsIGFyZ3MpIHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKSxcbiAgICAgICAgcGFyc2VkTGluZXMgPSBwYXJzZUxpbmVzKGxpbmVzLCBhcmdzKSxcbiAgICAgICAgcGFyc2VkQ29udGVudCA9IHBhcnNlZExpbmVzLmpvaW4oJ1xcbicpO1xuXG4gIHJldHVybiBwYXJzZWRDb250ZW50O1xufVxuXG5mdW5jdGlvbiBwYXJzZUxpbmUobGluZSwgYXJncykge1xuICBjb25zdCBwYXJzZWRMaW5lID0gbGluZS5yZXBsYWNlKC9cXCRcXHsoLis/KVxcfS9nLCBmdW5jdGlvbihtYXRjaCwgdG9rZW4pIHtcbiAgICBjb25zdCBwYXJzZWRUb2tlbiA9IHBhcnNlVG9rZW4odG9rZW4sIGFyZ3MpO1xuXG4gICAgcmV0dXJuIHBhcnNlZFRva2VuO1xuICB9KTtcblxuICByZXR1cm4gcGFyc2VkTGluZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHBhcnNlRmlsZTogcGFyc2VGaWxlLFxuICBwYXJzZUNvbnRlbnQ6IHBhcnNlQ29udGVudCxcbiAgcGFyc2VMaW5lOiBwYXJzZUxpbmVcbn07XG5cbmZ1bmN0aW9uIHBhcnNlTGluZXMobGluZXMsIGFyZ3MpIHtcbiAgY29uc3QgcGFyc2VkTGluZXMgPSBsaW5lcy5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgIGNvbnN0IHBhcnNlZExpbmUgPSBwYXJzZUxpbmUobGluZSwgYXJncyk7XG5cbiAgICByZXR1cm4gcGFyc2VkTGluZTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZExpbmVzO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRva2VuKHRva2VuLCBhcmdzKSB7XG4gIGxldCBwYXJzZWRUb2tlbiA9ICcnO1xuXG4gIGlmIChhcmdzLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuICAgIHBhcnNlZFRva2VuID0gYXJnc1t0b2tlbl07XG4gIH1cblxuICByZXR1cm4gcGFyc2VkVG9rZW47XG59XG4iXX0=