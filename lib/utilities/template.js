'use strict';

var fileSystemUtilities = require('../utilities/fileSystem');

var readFile = fileSystemUtilities.readFile;

function parseFile(filePath, args) {
  var content = readFile(filePath),
      parsedContent = parseContent(content, args);
  return parsedContent;
}

function parseContent(content, args) {
  var lines = content.split('\n'),
      parsedLines = parseLines(lines, args),
      parsedContent = parsedLines.join('\n');
  return parsedContent;
}

function parseLine(line, args) {
  var parsedLine = line.replace(/\$\{(.+?)\}/g, function (match, token) {
    var parsedToken = parseToken(token, args);
    return parsedToken;
  });
  return parsedLine;
}

module.exports = {
  parseFile: parseFile,
  parseContent: parseContent,
  parseLine: parseLine
};

function parseLines(lines, args) {
  var parsedLines = lines.map(function (line) {
    var parsedLine = parseLine(line, args);
    return parsedLine;
  });
  return parsedLines;
}

function parseToken(token, args) {
  var parsedToken = '';

  if (args.hasOwnProperty(token)) {
    parsedToken = args[token];
  }

  return parsedToken;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbImZpbGVTeXN0ZW1VdGlsaXRpZXMiLCJyZXF1aXJlIiwicmVhZEZpbGUiLCJwYXJzZUZpbGUiLCJmaWxlUGF0aCIsImFyZ3MiLCJjb250ZW50IiwicGFyc2VkQ29udGVudCIsInBhcnNlQ29udGVudCIsImxpbmVzIiwic3BsaXQiLCJwYXJzZWRMaW5lcyIsInBhcnNlTGluZXMiLCJqb2luIiwicGFyc2VMaW5lIiwibGluZSIsInBhcnNlZExpbmUiLCJyZXBsYWNlIiwibWF0Y2giLCJ0b2tlbiIsInBhcnNlZFRva2VuIiwicGFyc2VUb2tlbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJtYXAiLCJoYXNPd25Qcm9wZXJ0eSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsbUJBQW1CLEdBQUdDLE9BQU8sQ0FBQyx5QkFBRCxDQUFuQzs7SUFFUUMsUSxHQUFhRixtQixDQUFiRSxROztBQUVSLFNBQVNDLFNBQVQsQ0FBbUJDLFFBQW5CLEVBQTZCQyxJQUE3QixFQUFtQztBQUNqQyxNQUFNQyxPQUFPLEdBQUdKLFFBQVEsQ0FBQ0UsUUFBRCxDQUF4QjtBQUFBLE1BQ01HLGFBQWEsR0FBR0MsWUFBWSxDQUFDRixPQUFELEVBQVVELElBQVYsQ0FEbEM7QUFHQSxTQUFPRSxhQUFQO0FBQ0Q7O0FBRUQsU0FBU0MsWUFBVCxDQUFzQkYsT0FBdEIsRUFBK0JELElBQS9CLEVBQXFDO0FBQ25DLE1BQU1JLEtBQUssR0FBR0gsT0FBTyxDQUFDSSxLQUFSLENBQWMsSUFBZCxDQUFkO0FBQUEsTUFDTUMsV0FBVyxHQUFHQyxVQUFVLENBQUNILEtBQUQsRUFBUUosSUFBUixDQUQ5QjtBQUFBLE1BRU1FLGFBQWEsR0FBR0ksV0FBVyxDQUFDRSxJQUFaLENBQWlCLElBQWpCLENBRnRCO0FBSUEsU0FBT04sYUFBUDtBQUNEOztBQUVELFNBQVNPLFNBQVQsQ0FBbUJDLElBQW5CLEVBQXlCVixJQUF6QixFQUErQjtBQUM3QixNQUFNVyxVQUFVLEdBQUdELElBQUksQ0FBQ0UsT0FBTCxDQUFhLGNBQWIsRUFBNkIsVUFBU0MsS0FBVCxFQUFnQkMsS0FBaEIsRUFBdUI7QUFDckUsUUFBTUMsV0FBVyxHQUFHQyxVQUFVLENBQUNGLEtBQUQsRUFBUWQsSUFBUixDQUE5QjtBQUVBLFdBQU9lLFdBQVA7QUFDRCxHQUprQixDQUFuQjtBQU1BLFNBQU9KLFVBQVA7QUFDRDs7QUFFRE0sTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZwQixFQUFBQSxTQUFTLEVBQVRBLFNBRGU7QUFFZkssRUFBQUEsWUFBWSxFQUFaQSxZQUZlO0FBR2ZNLEVBQUFBLFNBQVMsRUFBVEE7QUFIZSxDQUFqQjs7QUFNQSxTQUFTRixVQUFULENBQW9CSCxLQUFwQixFQUEyQkosSUFBM0IsRUFBaUM7QUFDL0IsTUFBTU0sV0FBVyxHQUFHRixLQUFLLENBQUNlLEdBQU4sQ0FBVSxVQUFTVCxJQUFULEVBQWU7QUFDM0MsUUFBTUMsVUFBVSxHQUFHRixTQUFTLENBQUNDLElBQUQsRUFBT1YsSUFBUCxDQUE1QjtBQUVBLFdBQU9XLFVBQVA7QUFDRCxHQUptQixDQUFwQjtBQU1BLFNBQU9MLFdBQVA7QUFDRDs7QUFFRCxTQUFTVSxVQUFULENBQW9CRixLQUFwQixFQUEyQmQsSUFBM0IsRUFBaUM7QUFDL0IsTUFBSWUsV0FBVyxHQUFHLEVBQWxCOztBQUVBLE1BQUlmLElBQUksQ0FBQ29CLGNBQUwsQ0FBb0JOLEtBQXBCLENBQUosRUFBZ0M7QUFDOUJDLElBQUFBLFdBQVcsR0FBR2YsSUFBSSxDQUFDYyxLQUFELENBQWxCO0FBQ0Q7O0FBRUQsU0FBT0MsV0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBmaWxlU3lzdGVtVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vdXRpbGl0aWVzL2ZpbGVTeXN0ZW0nKTtcblxuY29uc3QgeyByZWFkRmlsZSB9ID0gZmlsZVN5c3RlbVV0aWxpdGllcztcblxuZnVuY3Rpb24gcGFyc2VGaWxlKGZpbGVQYXRoLCBhcmdzKSB7XG4gIGNvbnN0IGNvbnRlbnQgPSByZWFkRmlsZShmaWxlUGF0aCksXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZUNvbnRlbnQoY29udGVudCwgYXJncyk7XG5cbiAgcmV0dXJuIHBhcnNlZENvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29udGVudChjb250ZW50LCBhcmdzKSB7XG4gIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyksXG4gICAgICAgIHBhcnNlZExpbmVzID0gcGFyc2VMaW5lcyhsaW5lcywgYXJncyksXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZWRMaW5lcy5qb2luKCdcXG4nKTtcblxuICByZXR1cm4gcGFyc2VkQ29udGVudDtcbn1cblxuZnVuY3Rpb24gcGFyc2VMaW5lKGxpbmUsIGFyZ3MpIHtcbiAgY29uc3QgcGFyc2VkTGluZSA9IGxpbmUucmVwbGFjZSgvXFwkXFx7KC4rPylcXH0vZywgZnVuY3Rpb24obWF0Y2gsIHRva2VuKSB7XG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBwYXJzZVRva2VuKHRva2VuLCBhcmdzKTtcblxuICAgIHJldHVybiBwYXJzZWRUb2tlbjtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZExpbmU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYXJzZUZpbGUsXG4gIHBhcnNlQ29udGVudCxcbiAgcGFyc2VMaW5lXG59O1xuXG5mdW5jdGlvbiBwYXJzZUxpbmVzKGxpbmVzLCBhcmdzKSB7XG4gIGNvbnN0IHBhcnNlZExpbmVzID0gbGluZXMubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBjb25zdCBwYXJzZWRMaW5lID0gcGFyc2VMaW5lKGxpbmUsIGFyZ3MpO1xuXG4gICAgcmV0dXJuIHBhcnNlZExpbmU7XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWRMaW5lcztcbn1cblxuZnVuY3Rpb24gcGFyc2VUb2tlbih0b2tlbiwgYXJncykge1xuICBsZXQgcGFyc2VkVG9rZW4gPSAnJztcblxuICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eSh0b2tlbikpIHtcbiAgICBwYXJzZWRUb2tlbiA9IGFyZ3NbdG9rZW5dO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlZFRva2VuO1xufVxuIl19