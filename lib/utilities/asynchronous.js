'use strict';

function whilst(callback, done, context) {
  var index = -1;

  function next() {
    index++;

    var terminate = callback(next, done, context, index);

    if (terminate) {
      done();
    }
  }

  next();
}

function forEach(array, callback, done, context) {
  var arrayLength = array.length;

  var index = -1;

  function next() {
    index++;

    var terminate = index === arrayLength;

    if (terminate) {
      done();
    } else {
      var element = array[index];

      callback(element, next, done, context, index);
    }
  }

  next();
}

function sequence(callbacks, done, context) {
  var callbacksLength = callbacks.length;

  var index = -1;

  function next() {
    index++;

    var terminate = index === callbacksLength;

    if (terminate) {
      done();
    } else {
      var callback = callbacks[index];

      callback(next, done, context, index);
    }
  }

  next();
}

module.exports = {
  whilst: whilst,
  forEach: forEach,
  sequence: sequence
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvYXN5bmNocm9ub3VzLmpzIl0sIm5hbWVzIjpbIndoaWxzdCIsImNhbGxiYWNrIiwiZG9uZSIsImNvbnRleHQiLCJpbmRleCIsIm5leHQiLCJ0ZXJtaW5hdGUiLCJmb3JFYWNoIiwiYXJyYXkiLCJhcnJheUxlbmd0aCIsImxlbmd0aCIsImVsZW1lbnQiLCJzZXF1ZW5jZSIsImNhbGxiYWNrcyIsImNhbGxiYWNrc0xlbmd0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLE1BQVQsQ0FBZ0JDLFFBQWhCLEVBQTBCQyxJQUExQixFQUFnQ0MsT0FBaEMsRUFBeUM7QUFDdkMsTUFBSUMsUUFBUSxDQUFDLENBQWI7O0FBRUEsV0FBU0MsSUFBVCxHQUFnQjtBQUNkRDs7QUFFQSxRQUFNRSxZQUFZTCxTQUFTSSxJQUFULEVBQWVILElBQWYsRUFBcUJDLE9BQXJCLEVBQThCQyxLQUE5QixDQUFsQjs7QUFFQSxRQUFJRSxTQUFKLEVBQWU7QUFDYko7QUFDRDtBQUNGOztBQUVERztBQUNEOztBQUVELFNBQVNFLE9BQVQsQ0FBaUJDLEtBQWpCLEVBQXdCUCxRQUF4QixFQUFrQ0MsSUFBbEMsRUFBd0NDLE9BQXhDLEVBQWlEO0FBQy9DLE1BQU1NLGNBQWNELE1BQU1FLE1BQTFCOztBQUVBLE1BQUlOLFFBQVEsQ0FBQyxDQUFiOztBQUVBLFdBQVNDLElBQVQsR0FBZ0I7QUFDZEQ7O0FBRUEsUUFBTUUsWUFBYUYsVUFBVUssV0FBN0I7O0FBRUEsUUFBSUgsU0FBSixFQUFlO0FBQ2JKO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsVUFBTVMsVUFBVUgsTUFBTUosS0FBTixDQUFoQjs7QUFFQUgsZUFBU1UsT0FBVCxFQUFrQk4sSUFBbEIsRUFBd0JILElBQXhCLEVBQThCQyxPQUE5QixFQUF1Q0MsS0FBdkM7QUFDRDtBQUNGOztBQUVEQztBQUNEOztBQUVELFNBQVNPLFFBQVQsQ0FBa0JDLFNBQWxCLEVBQTZCWCxJQUE3QixFQUFtQ0MsT0FBbkMsRUFBNEM7QUFDMUMsTUFBTVcsa0JBQWtCRCxVQUFVSCxNQUFsQzs7QUFFQSxNQUFJTixRQUFRLENBQUMsQ0FBYjs7QUFFQSxXQUFTQyxJQUFULEdBQWdCO0FBQ2REOztBQUVBLFFBQU1FLFlBQWFGLFVBQVVVLGVBQTdCOztBQUVBLFFBQUlSLFNBQUosRUFBZTtBQUNiSjtBQUNELEtBRkQsTUFFTztBQUNMLFVBQU1ELFdBQVdZLFVBQVVULEtBQVYsQ0FBakI7O0FBRUFILGVBQVNJLElBQVQsRUFBZUgsSUFBZixFQUFxQkMsT0FBckIsRUFBOEJDLEtBQTlCO0FBQ0Q7QUFDRjs7QUFFREM7QUFDRDs7QUFFRFUsT0FBT0MsT0FBUCxHQUFpQjtBQUNmaEIsVUFBUUEsTUFETztBQUVmTyxXQUFTQSxPQUZNO0FBR2ZLLFlBQVVBO0FBSEssQ0FBakIiLCJmaWxlIjoiYXN5bmNocm9ub3VzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZnVuY3Rpb24gd2hpbHN0KGNhbGxiYWNrLCBkb25lLCBjb250ZXh0KSB7XHJcbiAgbGV0IGluZGV4ID0gLTE7XHJcblxyXG4gIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICBpbmRleCsrO1xyXG5cclxuICAgIGNvbnN0IHRlcm1pbmF0ZSA9IGNhbGxiYWNrKG5leHQsIGRvbmUsIGNvbnRleHQsIGluZGV4KTtcclxuXHJcbiAgICBpZiAodGVybWluYXRlKSB7XHJcbiAgICAgIGRvbmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5leHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9yRWFjaChhcnJheSwgY2FsbGJhY2ssIGRvbmUsIGNvbnRleHQpIHtcclxuICBjb25zdCBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcclxuXHJcbiAgbGV0IGluZGV4ID0gLTE7XHJcblxyXG4gIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICBpbmRleCsrO1xyXG5cclxuICAgIGNvbnN0IHRlcm1pbmF0ZSA9IChpbmRleCA9PT0gYXJyYXlMZW5ndGgpO1xyXG5cclxuICAgIGlmICh0ZXJtaW5hdGUpIHtcclxuICAgICAgZG9uZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGFycmF5W2luZGV4XTtcclxuXHJcbiAgICAgIGNhbGxiYWNrKGVsZW1lbnQsIG5leHQsIGRvbmUsIGNvbnRleHQsIGluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5leHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VxdWVuY2UoY2FsbGJhY2tzLCBkb25lLCBjb250ZXh0KSB7XHJcbiAgY29uc3QgY2FsbGJhY2tzTGVuZ3RoID0gY2FsbGJhY2tzLmxlbmd0aDtcclxuXHJcbiAgbGV0IGluZGV4ID0gLTE7XHJcblxyXG4gIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICBpbmRleCsrO1xyXG5cclxuICAgIGNvbnN0IHRlcm1pbmF0ZSA9IChpbmRleCA9PT0gY2FsbGJhY2tzTGVuZ3RoKTtcclxuXHJcbiAgICBpZiAodGVybWluYXRlKSB7XHJcbiAgICAgIGRvbmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2luZGV4XTtcclxuXHJcbiAgICAgIGNhbGxiYWNrKG5leHQsIGRvbmUsIGNvbnRleHQsIGluZGV4KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5leHQoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgd2hpbHN0OiB3aGlsc3QsXHJcbiAgZm9yRWFjaDogZm9yRWFjaCxcclxuICBzZXF1ZW5jZTogc2VxdWVuY2VcclxufTtcclxuIl19