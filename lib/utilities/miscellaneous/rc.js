"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _path = _interopRequireDefault(require("path"));

var _array = require("../../utilities/array");

var _constants = require("../../constants");

var _fileSystem = require("../../utilities/fileSystem");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

if (!globalThis.rc) {
  globalThis.rc = _rc;
}

var rc = globalThis.rc;
var _default = rc;
exports["default"] = _default;
var pathResolver = _path["default"].resolve,
    baseExtension = _constants.DEFAULT_RC_BASE_EXTENSION;

function _rc() {
  var environmentNameOrArgv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var environment,
      environmentName,
      environmentNameOrArgvArgv = environmentNameOrArgv instanceof Array;

  if (environmentNameOrArgvArgv) {
    var argv = environmentNameOrArgv; ///

    environmentName = environmentNameFromArgv(argv);
  } else {
    environmentName = environmentNameOrArgv; ///
  }

  var json = readRCFile(),
      environments = json.environments;

  if (environmentName === null) {
    var firstEnvironment = (0, _array.first)(environments);
    environment = firstEnvironment; ///
  } else {
    environment = environments.find(function (environment) {
      var name = environment.name,
          found = name === environmentName;
      return found;
    });
  }

  delete environment.name;
  Object.assign(rc, environment);
  return environment;
}

function readRCFile() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = (0, _fileSystem.readFile)(absoluteRCFilePath),
      json = JSON.parse(fileContent);
  return json;
}

function writeRCFile(json) {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = JSON.stringify(json, null, "\t");
  (0, _fileSystem.writeFile)(absoluteRCFilePath, fileContent);
}

function updateRCFile(addedProperties) {
  var json = readRCFile();

  if (addedProperties) {
    Object.assign(json, addedProperties);
  }

  for (var _len = arguments.length, deletedPropertyNames = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    deletedPropertyNames[_key - 1] = arguments[_key];
  }

  deletedPropertyNames.forEach(function (deletedPropertyName) {
    delete json[deletedPropertyName];
  });
  writeRCFile(json);
}

function checkRCFileExists() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      rcFileExists = (0, _fileSystem.checkFileExists)(absoluteRCFilePath);
  return rcFileExists;
}

function createVacuousRCFile() {
  var json = {
    "environments": [{}]
  };
  writeRCFile(json);
}

function setRCBaseExtension(rcBaseExtension) {
  baseExtension = rcBaseExtension;
}

function setRCPathResolver(rcPathResolver) {
  pathResolver = rcPathResolver;
}

Object.assign(_rc, {
  readRCFile: readRCFile,
  writeRCFile: writeRCFile,
  updateRCFile: updateRCFile,
  checkRCFileExists: checkRCFileExists,
  createVacuousRCFile: createVacuousRCFile,
  setRCBaseExtension: setRCBaseExtension,
  setRCPathResolver: setRCPathResolver
});

function environmentNameFromArgv(argv) {
  var environmentName = null;
  argv.find(function (argument) {
    ///
    var matches = argument.match(/--environment=(.+)/),
        found = matches !== null;

    if (found) {
      var secondMatch = (0, _array.second)(matches);
      environmentName = secondMatch;
    }

    return found;
  });
  return environmentName;
}

function absoluteRCFilePathFromNothing() {
  var filePath = "./.".concat(baseExtension, "rc"),
      absoluteRCFilePath = pathResolver(filePath);
  return absoluteRCFilePath;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJjLmpzIl0sIm5hbWVzIjpbImdsb2JhbFRoaXMiLCJyYyIsIl9yYyIsInBhdGhSZXNvbHZlciIsInBhdGgiLCJyZXNvbHZlIiwiYmFzZUV4dGVuc2lvbiIsIkRFRkFVTFRfUkNfQkFTRV9FWFRFTlNJT04iLCJlbnZpcm9ubWVudE5hbWVPckFyZ3YiLCJlbnZpcm9ubWVudCIsImVudmlyb25tZW50TmFtZSIsImVudmlyb25tZW50TmFtZU9yQXJndkFyZ3YiLCJBcnJheSIsImFyZ3YiLCJlbnZpcm9ubWVudE5hbWVGcm9tQXJndiIsImpzb24iLCJyZWFkUkNGaWxlIiwiZW52aXJvbm1lbnRzIiwiZmlyc3RFbnZpcm9ubWVudCIsImZpbmQiLCJuYW1lIiwiZm91bmQiLCJPYmplY3QiLCJhc3NpZ24iLCJhYnNvbHV0ZVJDRmlsZVBhdGgiLCJhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZyIsImZpbGVDb250ZW50IiwiSlNPTiIsInBhcnNlIiwid3JpdGVSQ0ZpbGUiLCJzdHJpbmdpZnkiLCJ1cGRhdGVSQ0ZpbGUiLCJhZGRlZFByb3BlcnRpZXMiLCJkZWxldGVkUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJkZWxldGVkUHJvcGVydHlOYW1lIiwiY2hlY2tSQ0ZpbGVFeGlzdHMiLCJyY0ZpbGVFeGlzdHMiLCJjcmVhdGVWYWN1b3VzUkNGaWxlIiwic2V0UkNCYXNlRXh0ZW5zaW9uIiwicmNCYXNlRXh0ZW5zaW9uIiwic2V0UkNQYXRoUmVzb2x2ZXIiLCJyY1BhdGhSZXNvbHZlciIsImFyZ3VtZW50IiwibWF0Y2hlcyIsIm1hdGNoIiwic2Vjb25kTWF0Y2giLCJmaWxlUGF0aCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFFQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLElBQUksQ0FBQ0EsVUFBVSxDQUFDQyxFQUFoQixFQUFvQjtBQUNsQkQsRUFBQUEsVUFBVSxDQUFDQyxFQUFYLEdBQWdCQyxHQUFoQjtBQUNEOztJQUVPRCxFLEdBQU9ELFUsQ0FB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QztBQUdBLFNBQU92QixrQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IGZpcnN0LCBzZWNvbmQgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2FycmF5XCI7XG5pbXBvcnQgeyBERUZBVUxUX1JDX0JBU0VfRVhURU5TSU9OIH0gZnJvbSBcIi4uLy4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgcmVhZEZpbGUsIHdyaXRlRmlsZSwgY2hlY2tGaWxlRXhpc3RzIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9maWxlU3lzdGVtXCI7XG5cbmlmICghZ2xvYmFsVGhpcy5yYykge1xuICBnbG9iYWxUaGlzLnJjID0gX3JjO1xufVxuXG5jb25zdCB7IHJjIH0gPSBnbG9iYWxUaGlzO1xuXG5leHBvcnQgZGVmYXVsdCByYztcblxubGV0IHBhdGhSZXNvbHZlciA9IHBhdGgucmVzb2x2ZSxcbiAgICBiYXNlRXh0ZW5zaW9uID0gREVGQVVMVF9SQ19CQVNFX0VYVEVOU0lPTjtcblxuZnVuY3Rpb24gX3JjKGVudmlyb25tZW50TmFtZU9yQXJndiA9IG51bGwpIHtcbiAgbGV0IGVudmlyb25tZW50LFxuICAgICAgZW52aXJvbm1lbnROYW1lLFxuICAgICAgZW52aXJvbm1lbnROYW1lT3JBcmd2QXJndiA9IChlbnZpcm9ubWVudE5hbWVPckFyZ3YgaW5zdGFuY2VvZiBBcnJheSk7XG5cbiAgaWYgKGVudmlyb25tZW50TmFtZU9yQXJndkFyZ3YpIHtcbiAgICBjb25zdCBhcmd2ID0gZW52aXJvbm1lbnROYW1lT3JBcmd2OyAvLy9cblxuICAgIGVudmlyb25tZW50TmFtZSA9IGVudmlyb25tZW50TmFtZUZyb21Bcmd2KGFyZ3YpO1xuICB9IGVsc2Uge1xuICAgIGVudmlyb25tZW50TmFtZSA9IGVudmlyb25tZW50TmFtZU9yQXJndjsgIC8vL1xuICB9XG5cbiAgY29uc3QganNvbiA9IHJlYWRSQ0ZpbGUoKSxcbiAgICAgICAgeyBlbnZpcm9ubWVudHMgfSA9IGpzb247XG5cbiAgaWYgKGVudmlyb25tZW50TmFtZSA9PT0gbnVsbCkge1xuICAgIGNvbnN0IGZpcnN0RW52aXJvbm1lbnQgPSBmaXJzdChlbnZpcm9ubWVudHMpO1xuXG4gICAgZW52aXJvbm1lbnQgPSBmaXJzdEVudmlyb25tZW50OyAvLy9cbiAgfSBlbHNlIHtcbiAgICBlbnZpcm9ubWVudCA9IGVudmlyb25tZW50cy5maW5kKChlbnZpcm9ubWVudCkgPT4ge1xuICAgICAgY29uc3QgeyBuYW1lIH0gPSBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGZvdW5kID0gKG5hbWUgPT09IGVudmlyb25tZW50TmFtZSk7XG5cbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZSBlbnZpcm9ubWVudC5uYW1lO1xuXG4gIE9iamVjdC5hc3NpZ24ocmMsIGVudmlyb25tZW50KTtcblxuICByZXR1cm4gZW52aXJvbm1lbnQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRSQ0ZpbGUoKSB7XG4gIGNvbnN0IGFic29sdXRlUkNGaWxlUGF0aCA9IGFic29sdXRlUkNGaWxlUGF0aEZyb21Ob3RoaW5nKCksXG4gICAgICAgIGZpbGVDb250ZW50ID0gcmVhZEZpbGUoYWJzb2x1dGVSQ0ZpbGVQYXRoKSxcbiAgICAgICAganNvbiA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xuXG4gIHJldHVybiBqc29uOyAgICAgIFxufVxuXG5mdW5jdGlvbiB3cml0ZVJDRmlsZShqc29uKSB7XG4gIGNvbnN0IGFic29sdXRlUkNGaWxlUGF0aCA9IGFic29sdXRlUkNGaWxlUGF0aEZyb21Ob3RoaW5nKCksXG4gICAgICAgIGZpbGVDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoanNvbiwgbnVsbCwgYFxcdGApO1xuXG4gIHdyaXRlRmlsZShhYnNvbHV0ZVJDRmlsZVBhdGgsIGZpbGVDb250ZW50KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUkNGaWxlKGFkZGVkUHJvcGVydGllcywgLi4uZGVsZXRlZFByb3BlcnR5TmFtZXMpIHtcbiAgbGV0IGpzb24gPSByZWFkUkNGaWxlKCk7XG5cbiAgaWYgKGFkZGVkUHJvcGVydGllcykge1xuICAgIE9iamVjdC5hc3NpZ24oanNvbiwgYWRkZWRQcm9wZXJ0aWVzKTtcbiAgfVxuXG4gIGRlbGV0ZWRQcm9wZXJ0eU5hbWVzLmZvckVhY2goKGRlbGV0ZWRQcm9wZXJ0eU5hbWUpID0+IHtcbiAgICBkZWxldGUganNvbltkZWxldGVkUHJvcGVydHlOYW1lXTtcbiAgfSk7XG5cbiAgd3JpdGVSQ0ZpbGUoanNvbik7ICAgICAgXG59XG5cbmZ1bmN0aW9uIGNoZWNrUkNGaWxlRXhpc3RzKCkge1xuICBjb25zdCBhYnNvbHV0ZVJDRmlsZVBhdGggPSBhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZygpLFxuICAgICAgICByY0ZpbGVFeGlzdHMgPSBjaGVja0ZpbGVFeGlzdHMoYWJzb2x1dGVSQ0ZpbGVQYXRoKTtcblxuICByZXR1cm4gcmNGaWxlRXhpc3RzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVWYWN1b3VzUkNGaWxlKCkge1xuICBjb25zdCBqc29uID0ge1xuICAgIFwiZW52aXJvbm1lbnRzXCI6IFtcbiAgICAgIHt9XG4gICAgXVxuICB9O1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pO1xufVxuXG5mdW5jdGlvbiBzZXRSQ0Jhc2VFeHRlbnNpb24ocmNCYXNlRXh0ZW5zaW9uKSB7IGJhc2VFeHRlbnNpb24gPSByY0Jhc2VFeHRlbnNpb247IH1cblxuZnVuY3Rpb24gc2V0UkNQYXRoUmVzb2x2ZXIocmNQYXRoUmVzb2x2ZXIpIHsgcGF0aFJlc29sdmVyID0gcmNQYXRoUmVzb2x2ZXI7IH1cblxuT2JqZWN0LmFzc2lnbihfcmMsIHtcbiAgcmVhZFJDRmlsZSxcbiAgd3JpdGVSQ0ZpbGUsXG4gIHVwZGF0ZVJDRmlsZSxcbiAgY2hlY2tSQ0ZpbGVFeGlzdHMsXG4gIGNyZWF0ZVZhY3VvdXNSQ0ZpbGUsXG4gIHNldFJDQmFzZUV4dGVuc2lvbixcbiAgc2V0UkNQYXRoUmVzb2x2ZXJcbn0pO1xuXG5mdW5jdGlvbiBlbnZpcm9ubWVudE5hbWVGcm9tQXJndihhcmd2KSB7XG4gIGxldCBlbnZpcm9ubWVudE5hbWUgPSBudWxsO1xuXG4gIGFyZ3YuZmluZCgoYXJndW1lbnQpID0+IHsgIC8vL1xuICAgIGNvbnN0IG1hdGNoZXMgPSBhcmd1bWVudC5tYXRjaCgvLS1lbnZpcm9ubWVudD0oLispLyksXG4gICAgICAgICAgZm91bmQgPSAobWF0Y2hlcyAhPT0gbnVsbCk7XG5cbiAgICBpZiAoZm91bmQpIHtcbiAgICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgICBlbnZpcm9ubWVudE5hbWUgPSBzZWNvbmRNYXRjaDtcbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH0pO1xuXG4gIHJldHVybiBlbnZpcm9ubWVudE5hbWU7XG59XG5cbmZ1bmN0aW9uIGFic29sdXRlUkNGaWxlUGF0aEZyb21Ob3RoaW5nKCkge1xuICBjb25zdCBmaWxlUGF0aCA9IGAuLy4ke2Jhc2VFeHRlbnNpb259cmNgLFxuICAgICAgICBhYnNvbHV0ZVJDRmlsZVBhdGggPSBwYXRoUmVzb2x2ZXIoZmlsZVBhdGgpO1xuXG4gIHJldHVybiBhYnNvbHV0ZVJDRmlsZVBhdGg7XG59XG4iXX0=