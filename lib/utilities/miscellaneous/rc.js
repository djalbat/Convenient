"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _path = _interopRequireDefault(require("path"));

var _array = require("../../utilities/array");

var _constants = require("../../constants");

var _fileSystem = require("../../utilities/fileSystem");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

if (!globalThis.rc) {
  globalThis.rc = _rc;
}

var rc = globalThis.rc;
var _default = rc;
exports["default"] = _default;
var pathResolver = _path["default"].resolve,
    baseExtension = _constants.DEFAULT_RC_BASE_EXTENSION;

function _rc() {
  var environmentNameOrArgv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var environment,
      environmentName,
      environmentNameOrArgvArgv = environmentNameOrArgv instanceof Array;

  if (environmentNameOrArgvArgv) {
    var argv = environmentNameOrArgv; ///

    environmentName = environmentNameFromArgv(argv);
  } else {
    environmentName = environmentNameOrArgv; ///
  }

  var json = readRCFile(),
      environments = json.environments;

  if (environmentName === null) {
    var firstEnvironment = (0, _array.first)(environments);
    environment = firstEnvironment; ///
  } else {
    environment = environments.find(function (environment) {
      var name = environment.name,
          found = name === environmentName;
      return found;
    });
  }

  delete environment.name;
  Object.assign(rc, environment);
  return environment;
}

function readRCFile() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = (0, _fileSystem.readFile)(absoluteRCFilePath),
      json = JSON.parse(fileContent);
  return json;
}

function writeRCFile(json) {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = JSON.stringify(json, null, "\t");
  (0, _fileSystem.writeFile)(absoluteRCFilePath, fileContent);
}

function updateRCFile(addedProperties) {
  var json = readRCFile();

  if (addedProperties) {
    Object.assign(json, addedProperties);
  }

  for (var _len = arguments.length, deletedPropertyNames = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    deletedPropertyNames[_key - 1] = arguments[_key];
  }

  deletedPropertyNames.forEach(function (deletedPropertyName) {
    delete json[deletedPropertyName];
  });
  writeRCFile(json);
}

function checkRCFileExists() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      rcFileExists = (0, _fileSystem.checkFileExists)(absoluteRCFilePath);
  return rcFileExists;
}

function createVacuousRCFile() {
  var json = {
    "environments": [{}]
  };
  writeRCFile(json);
}

function setRCBaseExtension(rcBaseExtension) {
  baseExtension = rcBaseExtension;
}

function setRCPathResolver(rcPathResolver) {
  pathResolver = rcPathResolver;
}

Object.assign(_rc, {
  readRCFile: readRCFile,
  writeRCFile: writeRCFile,
  updateRCFile: updateRCFile,
  checkRCFileExists: checkRCFileExists,
  createVacuousRCFile: createVacuousRCFile,
  setRCBaseExtension: setRCBaseExtension,
  setRCPathResolver: setRCPathResolver
});

function environmentNameFromArgv(argv) {
  var environmentName = null;
  argv.find(function (argument) {
    ///
    var matches = argument.match(/--environment=(.+)/),
        found = matches !== null;

    if (found) {
      var secondMatch = (0, _array.second)(matches);
      environmentName = secondMatch;
    }

    return found;
  });
  return environmentName;
}

function absoluteRCFilePathFromNothing() {
  var filePath = "./.".concat(baseExtension, "rc"),
      absoluteRCFilePath = pathResolver(filePath);
  return absoluteRCFilePath;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2VzNi91dGlsaXRpZXMvbWlzY2VsbGFuZW91cy9yYy5qcyJdLCJuYW1lcyI6WyJnbG9iYWxUaGlzIiwicmMiLCJfcmMiLCJwYXRoUmVzb2x2ZXIiLCJwYXRoIiwicmVzb2x2ZSIsImJhc2VFeHRlbnNpb24iLCJERUZBVUxUX1JDX0JBU0VfRVhURU5TSU9OIiwiZW52aXJvbm1lbnROYW1lT3JBcmd2IiwiZW52aXJvbm1lbnQiLCJlbnZpcm9ubWVudE5hbWUiLCJlbnZpcm9ubWVudE5hbWVPckFyZ3ZBcmd2IiwiQXJyYXkiLCJhcmd2IiwiZW52aXJvbm1lbnROYW1lRnJvbUFyZ3YiLCJqc29uIiwicmVhZFJDRmlsZSIsImVudmlyb25tZW50cyIsImZpcnN0RW52aXJvbm1lbnQiLCJmaW5kIiwibmFtZSIsImZvdW5kIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJzb2x1dGVSQ0ZpbGVQYXRoIiwiYWJzb2x1dGVSQ0ZpbGVQYXRoRnJvbU5vdGhpbmciLCJmaWxlQ29udGVudCIsIkpTT04iLCJwYXJzZSIsIndyaXRlUkNGaWxlIiwic3RyaW5naWZ5IiwidXBkYXRlUkNGaWxlIiwiYWRkZWRQcm9wZXJ0aWVzIiwiZGVsZXRlZFByb3BlcnR5TmFtZXMiLCJmb3JFYWNoIiwiZGVsZXRlZFByb3BlcnR5TmFtZSIsImNoZWNrUkNGaWxlRXhpc3RzIiwicmNGaWxlRXhpc3RzIiwiY3JlYXRlVmFjdW91c1JDRmlsZSIsInNldFJDQmFzZUV4dGVuc2lvbiIsInJjQmFzZUV4dGVuc2lvbiIsInNldFJDUGF0aFJlc29sdmVyIiwicmNQYXRoUmVzb2x2ZXIiLCJhcmd1bWVudCIsIm1hdGNoZXMiLCJtYXRjaCIsInNlY29uZE1hdGNoIiwiZmlsZVBhdGgiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7O0FBRUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxJQUFJLENBQUNBLFVBQVUsQ0FBQ0MsRUFBaEIsRUFBb0I7QUFDbEJELEVBQUFBLFVBQVUsQ0FBQ0MsRUFBWCxH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QixrQkFBa0IsR0FBR3JCLFlBQVksQ0FBQzRDLFFBQUQsQ0FEdkM7QUFHQSxTQUFPdkIsa0JBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5pbXBvcnQgeyBmaXJzdCwgc2Vjb25kIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9hcnJheVwiO1xuaW1wb3J0IHsgREVGQVVMVF9SQ19CQVNFX0VYVEVOU0lPTiB9IGZyb20gXCIuLi8uLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IHJlYWRGaWxlLCB3cml0ZUZpbGUsIGNoZWNrRmlsZUV4aXN0cyB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZmlsZVN5c3RlbVwiO1xuXG5pZiAoIWdsb2JhbFRoaXMucmMpIHtcbiAgZ2xvYmFsVGhpcy5yYyA9IF9yYztcbn1cblxuY29uc3QgeyByYyB9ID0gZ2xvYmFsVGhpcztcblxuZXhwb3J0IGRlZmF1bHQgcmM7XG5cbmxldCBwYXRoUmVzb2x2ZXIgPSBwYXRoLnJlc29sdmUsXG4gICAgYmFzZUV4dGVuc2lvbiA9IERFRkFVTFRfUkNfQkFTRV9FWFRFTlNJT047XG5cbmZ1bmN0aW9uIF9yYyhlbnZpcm9ubWVudE5hbWVPckFyZ3YgPSBudWxsKSB7XG4gIGxldCBlbnZpcm9ubWVudCxcbiAgICAgIGVudmlyb25tZW50TmFtZSxcbiAgICAgIGVudmlyb25tZW50TmFtZU9yQXJndkFyZ3YgPSAoZW52aXJvbm1lbnROYW1lT3JBcmd2IGluc3RhbmNlb2YgQXJyYXkpO1xuXG4gIGlmIChlbnZpcm9ubWVudE5hbWVPckFyZ3ZBcmd2KSB7XG4gICAgY29uc3QgYXJndiA9IGVudmlyb25tZW50TmFtZU9yQXJndjsgLy8vXG5cbiAgICBlbnZpcm9ubWVudE5hbWUgPSBlbnZpcm9ubWVudE5hbWVGcm9tQXJndihhcmd2KTtcbiAgfSBlbHNlIHtcbiAgICBlbnZpcm9ubWVudE5hbWUgPSBlbnZpcm9ubWVudE5hbWVPckFyZ3Y7ICAvLy9cbiAgfVxuXG4gIGNvbnN0IGpzb24gPSByZWFkUkNGaWxlKCksXG4gICAgICAgIHsgZW52aXJvbm1lbnRzIH0gPSBqc29uO1xuXG4gIGlmIChlbnZpcm9ubWVudE5hbWUgPT09IG51bGwpIHtcbiAgICBjb25zdCBmaXJzdEVudmlyb25tZW50ID0gZmlyc3QoZW52aXJvbm1lbnRzKTtcblxuICAgIGVudmlyb25tZW50ID0gZmlyc3RFbnZpcm9ubWVudDsgLy8vXG4gIH0gZWxzZSB7XG4gICAgZW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudHMuZmluZCgoZW52aXJvbm1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgbmFtZSB9ID0gZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBmb3VuZCA9IChuYW1lID09PSBlbnZpcm9ubWVudE5hbWUpO1xuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGUgZW52aXJvbm1lbnQubmFtZTtcblxuICBPYmplY3QuYXNzaWduKHJjLCBlbnZpcm9ubWVudCk7XG5cbiAgcmV0dXJuIGVudmlyb25tZW50O1xufVxuXG5mdW5jdGlvbiByZWFkUkNGaWxlKCkge1xuICBjb25zdCBhYnNvbHV0ZVJDRmlsZVBhdGggPSBhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZygpLFxuICAgICAgICBmaWxlQ29udGVudCA9IHJlYWRGaWxlKGFic29sdXRlUkNGaWxlUGF0aCksXG4gICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcblxuICByZXR1cm4ganNvbjsgICAgICBcbn1cblxuZnVuY3Rpb24gd3JpdGVSQ0ZpbGUoanNvbikge1xuICBjb25zdCBhYnNvbHV0ZVJDRmlsZVBhdGggPSBhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZygpLFxuICAgICAgICBmaWxlQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KGpzb24sIG51bGwsIGBcXHRgKTtcblxuICB3cml0ZUZpbGUoYWJzb2x1dGVSQ0ZpbGVQYXRoLCBmaWxlQ29udGVudCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVJDRmlsZShhZGRlZFByb3BlcnRpZXMsIC4uLmRlbGV0ZWRQcm9wZXJ0eU5hbWVzKSB7XG4gIGxldCBqc29uID0gcmVhZFJDRmlsZSgpO1xuXG4gIGlmIChhZGRlZFByb3BlcnRpZXMpIHtcbiAgICBPYmplY3QuYXNzaWduKGpzb24sIGFkZGVkUHJvcGVydGllcyk7XG4gIH1cblxuICBkZWxldGVkUHJvcGVydHlOYW1lcy5mb3JFYWNoKChkZWxldGVkUHJvcGVydHlOYW1lKSA9PiB7XG4gICAgZGVsZXRlIGpzb25bZGVsZXRlZFByb3BlcnR5TmFtZV07XG4gIH0pO1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pOyAgICAgIFxufVxuXG5mdW5jdGlvbiBjaGVja1JDRmlsZUV4aXN0cygpIHtcbiAgY29uc3QgYWJzb2x1dGVSQ0ZpbGVQYXRoID0gYWJzb2x1dGVSQ0ZpbGVQYXRoRnJvbU5vdGhpbmcoKSxcbiAgICAgICAgcmNGaWxlRXhpc3RzID0gY2hlY2tGaWxlRXhpc3RzKGFic29sdXRlUkNGaWxlUGF0aCk7XG5cbiAgcmV0dXJuIHJjRmlsZUV4aXN0cztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFjdW91c1JDRmlsZSgpIHtcbiAgY29uc3QganNvbiA9IHtcbiAgICBcImVudmlyb25tZW50c1wiOiBbXG4gICAgICB7fVxuICAgIF1cbiAgfTtcblxuICB3cml0ZVJDRmlsZShqc29uKTtcbn1cblxuZnVuY3Rpb24gc2V0UkNCYXNlRXh0ZW5zaW9uKHJjQmFzZUV4dGVuc2lvbikgeyBiYXNlRXh0ZW5zaW9uID0gcmNCYXNlRXh0ZW5zaW9uOyB9XG5cbmZ1bmN0aW9uIHNldFJDUGF0aFJlc29sdmVyKHJjUGF0aFJlc29sdmVyKSB7IHBhdGhSZXNvbHZlciA9IHJjUGF0aFJlc29sdmVyOyB9XG5cbk9iamVjdC5hc3NpZ24oX3JjLCB7XG4gIHJlYWRSQ0ZpbGUsXG4gIHdyaXRlUkNGaWxlLFxuICB1cGRhdGVSQ0ZpbGUsXG4gIGNoZWNrUkNGaWxlRXhpc3RzLFxuICBjcmVhdGVWYWN1b3VzUkNGaWxlLFxuICBzZXRSQ0Jhc2VFeHRlbnNpb24sXG4gIHNldFJDUGF0aFJlc29sdmVyXG59KTtcblxuZnVuY3Rpb24gZW52aXJvbm1lbnROYW1lRnJvbUFyZ3YoYXJndikge1xuICBsZXQgZW52aXJvbm1lbnROYW1lID0gbnVsbDtcblxuICBhcmd2LmZpbmQoKGFyZ3VtZW50KSA9PiB7ICAvLy9cbiAgICBjb25zdCBtYXRjaGVzID0gYXJndW1lbnQubWF0Y2goLy0tZW52aXJvbm1lbnQ9KC4rKS8pLFxuICAgICAgICAgIGZvdW5kID0gKG1hdGNoZXMgIT09IG51bGwpO1xuXG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICBjb25zdCBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKTtcblxuICAgICAgZW52aXJvbm1lbnROYW1lID0gc2Vjb25kTWF0Y2g7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9KTtcblxuICByZXR1cm4gZW52aXJvbm1lbnROYW1lO1xufVxuXG5mdW5jdGlvbiBhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZygpIHtcbiAgY29uc3QgZmlsZVBhdGggPSBgLi8uJHtiYXNlRXh0ZW5zaW9ufXJjYCxcbiAgICAgICAgYWJzb2x1dGVSQ0ZpbGVQYXRoID0gcGF0aFJlc29sdmVyKGZpbGVQYXRoKTtcblxuICByZXR1cm4gYWJzb2x1dGVSQ0ZpbGVQYXRoO1xufVxuIl0sImZpbGUiOiJyYy5qcyJ9