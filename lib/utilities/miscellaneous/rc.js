'use strict';

var path = require('path');

var arrayUtilities = require('../../utilities/array'),
    fileSystemUtilities = require('../../utilities/fileSystem');

var first = arrayUtilities.first,
    readFile = fileSystemUtilities.readFile;


var rcBaseExtension = '';

function rc() {
  var environmentName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var filePath = './.' + rcBaseExtension + 'rc',
      absoluteFilePath = path.resolve(filePath),
      fileContent = readFile(absoluteFilePath),
      json = JSON.parse(fileContent),
      environments = json.environments;


  var environment = void 0;

  if (environmentName === null) {
    var firstEnvironment = first(environments);

    environment = firstEnvironment; ///
  } else {
    environment = environments.find(function (environment) {
      var name = environment.name,
          found = name === environmentName;


      return found;
    });
  }

  delete environment.name;

  Object.assign(rc, environment);

  return environment;
}

function setRCBaseExtension(baseExtension) {
  rcBaseExtension = baseExtension;
}

Object.assign(rc, {
  setRCBaseExtension: setRCBaseExtension
});

rc();

module.exports = rc;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2VzNi91dGlsaXRpZXMvbWlzY2VsbGFuZW91cy9yYy5qcyJdLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImFycmF5VXRpbGl0aWVzIiwiZmlsZVN5c3RlbVV0aWxpdGllcyIsImZpcnN0IiwicmVhZEZpbGUiLCJyY0Jhc2VFeHRlbnNpb24iLCJyYyIsImVudmlyb25tZW50TmFtZSIsImFic29sdXRlRmlsZVBhdGgiLCJyZXNvbHZlIiwiZmlsZVBhdGgiLCJmaWxlQ29udGVudCIsImpzb24iLCJKU09OIiwicGFyc2UiLCJlbnZpcm9ubWVudHMiLCJlbnZpcm9ubWVudCIsImZpcnN0RW52aXJvbm1lbnQiLCJmaW5kIiwibmFtZSIsImZvdW5kIiwiT2JqZWN0IiwiYXNzaWduIiwic2V0UkNCYXNlRXh0ZW5zaW9uIiwiYmFzZUV4dGVuc2lvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLE9BQU9DLFFBQVEsTUFBUixDQUFiOztBQUVBLElBQU1DLGlCQUFpQkQsUUFBUSx1QkFBUixDQUF2QjtBQUFBLElBQ01FLHNCQUFzQkYsUUFBUSw0QkFBUixDQUQ1Qjs7QUFHTSxJQUFFRyxLQUFGLEdBQVlGLGNBQVosQ0FBRUUsS0FBRjtBQUFBLElBQ0VDLFFBREYsR0FDZUYsbUJBRGYsQ0FDRUUsUUFERjs7O0FBR04sSUFBSUMsa0JBQWtCLEVBQXRCOztBQUVBLFNBQVNDLEVBQVQsR0FBb0M7QUFBQSxNQUF4QkMsZUFBd0IsdUVBQU4sSUFBTTtBQUM1Qix5QkFBaUJGLGVBQWpCO0FBQUEsTUFDQUcsZ0JBREEsR0FDbUJULEtBQUtVLE9BQUwsQ0FBYUMsUUFBYixDQURuQjtBQUFBLE1BRUFDLFdBRkEsR0FFY1AsU0FBU0ksZ0JBQVQsQ0FGZDtBQUFBLE1BR0FJLElBSEEsR0FHT0MsS0FBS0MsS0FBTCxDQUFXSCxXQUFYLENBSFA7QUFBQSxNQUlFSSxZQUpGLEdBSW1CSCxJQUpuQixDQUlFRyxZQUpGOzs7QUFNTixNQUFJQyxvQkFBSjs7QUFFQSxNQUFJVCxvQkFBb0IsSUFBeEIsRUFBOEI7QUFDNUIsUUFBTVUsbUJBQW1CZCxNQUFNWSxZQUFOLENBQXpCOztBQUVBQyxrQkFBY0MsZ0JBQWQsQ0FINEIsQ0FHSTtBQUNqQyxHQUpELE1BSU87QUFDTEQsa0JBQWNELGFBQWFHLElBQWIsQ0FBa0IsVUFBU0YsV0FBVCxFQUFzQjtBQUM5QyxVQUFFRyxJQUFGLEdBQVdILFdBQVgsQ0FBRUcsSUFBRjtBQUFBLFVBQ0FDLEtBREEsR0FDU0QsU0FBU1osZUFEbEI7OztBQUdOLGFBQU9hLEtBQVA7QUFDRCxLQUxhLENBQWQ7QUFNRDs7QUFFRCxTQUFPSixZQUFZRyxJQUFuQjs7QUFFQUUsU0FBT0MsTUFBUCxDQUFjaEIsRUFBZCxFQUFrQlUsV0FBbEI7O0FBRUEsU0FBT0EsV0FBUDtBQUNEOztBQUVELFNBQVNPLGtCQUFULENBQTRCQyxhQUE1QixFQUEyQztBQUFFbkIsb0JBQWtCbUIsYUFBbEI7QUFBa0M7O0FBRS9FSCxPQUFPQyxNQUFQLENBQWNoQixFQUFkLEVBQWtCO0FBQ2hCaUIsc0JBQW9CQTtBQURKLENBQWxCOztBQUlBakI7O0FBRUFtQixPQUFPQyxPQUFQLEdBQWlCcEIsRUFBakIiLCJmaWxlIjoicmMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmNvbnN0IGFycmF5VXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0aWVzL2FycmF5JyksXG4gICAgICBmaWxlU3lzdGVtVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0aWVzL2ZpbGVTeXN0ZW0nKTtcblxuY29uc3QgeyBmaXJzdCB9ID0gYXJyYXlVdGlsaXRpZXMsXG4gICAgICB7IHJlYWRGaWxlIH0gPSBmaWxlU3lzdGVtVXRpbGl0aWVzO1xuXG5sZXQgcmNCYXNlRXh0ZW5zaW9uID0gJyc7XG5cbmZ1bmN0aW9uIHJjKGVudmlyb25tZW50TmFtZSA9IG51bGwpIHtcbiAgY29uc3QgZmlsZVBhdGggPSBgLi8uJHtyY0Jhc2VFeHRlbnNpb259cmNgLFxuICAgICAgICBhYnNvbHV0ZUZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKGZpbGVQYXRoKSxcbiAgICAgICAgZmlsZUNvbnRlbnQgPSByZWFkRmlsZShhYnNvbHV0ZUZpbGVQYXRoKSxcbiAgICAgICAganNvbiA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpLFxuICAgICAgICB7IGVudmlyb25tZW50cyB9ID0ganNvbjtcblxuICBsZXQgZW52aXJvbm1lbnQ7XG5cbiAgaWYgKGVudmlyb25tZW50TmFtZSA9PT0gbnVsbCkge1xuICAgIGNvbnN0IGZpcnN0RW52aXJvbm1lbnQgPSBmaXJzdChlbnZpcm9ubWVudHMpO1xuXG4gICAgZW52aXJvbm1lbnQgPSBmaXJzdEVudmlyb25tZW50OyAvLy9cbiAgfSBlbHNlIHtcbiAgICBlbnZpcm9ubWVudCA9IGVudmlyb25tZW50cy5maW5kKGZ1bmN0aW9uKGVudmlyb25tZW50KSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IGVudmlyb25tZW50LFxuICAgICAgICAgICAgZm91bmQgPSAobmFtZSA9PT0gZW52aXJvbm1lbnROYW1lKTtcblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlIGVudmlyb25tZW50Lm5hbWU7XG5cbiAgT2JqZWN0LmFzc2lnbihyYywgZW52aXJvbm1lbnQpO1xuXG4gIHJldHVybiBlbnZpcm9ubWVudDtcbn1cblxuZnVuY3Rpb24gc2V0UkNCYXNlRXh0ZW5zaW9uKGJhc2VFeHRlbnNpb24pIHsgcmNCYXNlRXh0ZW5zaW9uID0gYmFzZUV4dGVuc2lvbjsgfVxuXG5PYmplY3QuYXNzaWduKHJjLCB7XG4gIHNldFJDQmFzZUV4dGVuc2lvbjogc2V0UkNCYXNlRXh0ZW5zaW9uXG59KTtcblxucmMoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByYztcbiJdfQ==