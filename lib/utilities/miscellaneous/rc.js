'use strict';

var path = require('path');

var arrayUtilities = require('../../utilities/array'),
    fileSystemUtilities = require('../../utilities/fileSystem');

var first = arrayUtilities.first,
    second = arrayUtilities.second,
    readFile = fileSystemUtilities.readFile,
    writeFile = fileSystemUtilities.writeFile,
    checkFileExists = fileSystemUtilities.checkFileExists;
var pathResolver = path.resolve,
    baseExtension = '';

function rc() {
  var environmentNameOrArgv = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  var environment,
      environmentName,
      environmentNameOrArgvArgv = environmentNameOrArgv instanceof Array;

  if (environmentNameOrArgvArgv) {
    var argv = environmentNameOrArgv; ///

    environmentName = environmentNameFromArgv(argv);
  } else {
    environmentName = environmentNameOrArgv; ///
  }

  var json = readRCFile(),
      environments = json.environments;

  if (environmentName === null) {
    var firstEnvironment = first(environments);
    environment = firstEnvironment; ///
  } else {
    environment = environments.find(function (environment) {
      var name = environment.name,
          found = name === environmentName;
      return found;
    });
  }

  delete environment.name;
  Object.assign(rc, environment);
  return environment;
}

function readRCFile() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = readFile(absoluteRCFilePath),
      json = JSON.parse(fileContent);
  return json;
}

function writeRCFile(json) {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      fileContent = JSON.stringify(json, null, "\t");
  writeFile(absoluteRCFilePath, fileContent);
}

function updateRCFile(addedProperties) {
  var json = readRCFile();

  if (addedProperties) {
    Object.assign(json, addedProperties);
  }

  for (var _len = arguments.length, deletedPropertyNames = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    deletedPropertyNames[_key - 1] = arguments[_key];
  }

  deletedPropertyNames.forEach(function (deletedPropertyName) {
    delete json[deletedPropertyName];
  });
  writeRCFile(json);
}

function checkRCFileExists() {
  var absoluteRCFilePath = absoluteRCFilePathFromNothing(),
      rcFileExists = checkFileExists(absoluteRCFilePath);
  return rcFileExists;
}

function createVacuousRCFile() {
  var json = {
    "environments": [{}]
  };
  writeRCFile(json);
}

function setRCBaseExtension(rcBaseExtension) {
  baseExtension = rcBaseExtension;
}

function setRCPathResolver(rcPathResolver) {
  pathResolver = rcPathResolver;
}

Object.assign(rc, {
  readRCFile: readRCFile,
  writeRCFile: writeRCFile,
  updateRCFile: updateRCFile,
  checkRCFileExists: checkRCFileExists,
  createVacuousRCFile: createVacuousRCFile,
  setRCBaseExtension: setRCBaseExtension,
  setRCPathResolver: setRCPathResolver
});
module.exports = rc;

function environmentNameFromArgv(argv) {
  var environmentName = null;
  argv.find(function (argument) {
    ///
    var matches = argument.match(/\-\-environment=(.+)/),
        found = matches !== null;

    if (found) {
      var secondMatch = second(matches);
      environmentName = secondMatch;
    }

    return found;
  });
  return environmentName;
}

function absoluteRCFilePathFromNothing() {
  var filePath = "./.".concat(baseExtension, "rc"),
      absoluteRCFilePath = pathResolver(filePath);
  return absoluteRCFilePath;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJjLmpzIl0sIm5hbWVzIjpbInBhdGgiLCJyZXF1aXJlIiwiYXJyYXlVdGlsaXRpZXMiLCJmaWxlU3lzdGVtVXRpbGl0aWVzIiwiZmlyc3QiLCJzZWNvbmQiLCJyZWFkRmlsZSIsIndyaXRlRmlsZSIsImNoZWNrRmlsZUV4aXN0cyIsInBhdGhSZXNvbHZlciIsInJlc29sdmUiLCJiYXNlRXh0ZW5zaW9uIiwicmMiLCJlbnZpcm9ubWVudE5hbWVPckFyZ3YiLCJlbnZpcm9ubWVudCIsImVudmlyb25tZW50TmFtZSIsImVudmlyb25tZW50TmFtZU9yQXJndkFyZ3YiLCJBcnJheSIsImFyZ3YiLCJlbnZpcm9ubWVudE5hbWVGcm9tQXJndiIsImpzb24iLCJyZWFkUkNGaWxlIiwiZW52aXJvbm1lbnRzIiwiZmlyc3RFbnZpcm9ubWVudCIsImZpbmQiLCJuYW1lIiwiZm91bmQiLCJPYmplY3QiLCJhc3NpZ24iLCJhYnNvbHV0ZVJDRmlsZVBhdGgiLCJhYnNvbHV0ZVJDRmlsZVBhdGhGcm9tTm90aGluZyIsImZpbGVDb250ZW50IiwiSlNPTiIsInBhcnNlIiwid3JpdGVSQ0ZpbGUiLCJzdHJpbmdpZnkiLCJ1cGRhdGVSQ0ZpbGUiLCJhZGRlZFByb3BlcnRpZXMiLCJkZWxldGVkUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJkZWxldGVkUHJvcGVydHlOYW1lIiwiY2hlY2tSQ0ZpbGVFeGlzdHMiLCJyY0ZpbGVFeGlzdHMiLCJjcmVhdGVWYWN1b3VzUkNGaWxlIiwic2V0UkNCYXNlRXh0ZW5zaW9uIiwicmNCYXNlRXh0ZW5zaW9uIiwic2V0UkNQYXRoUmVzb2x2ZXIiLCJyY1BhdGhSZXNvbHZlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcmd1bWVudCIsIm1hdGNoZXMiLCJtYXRjaCIsInNlY29uZE1hdGNoIiwiZmlsZVBhdGgiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBRUEsSUFBTUMsY0FB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QU8sS0FBSyxJQUQzQjs7QUFHQSxRQUFJekIsS0FBSixFQUFXO0FBQ1QsVUFBTTJCLFdBQVcsR0FBR2hELE1BQU0sQ0FBQzhDLE9BQUQsQ0FBMUI7QUFFQXBDLE1BQUFBLGVBQWUsR0FBR3NDLFdBQWxCO0FBQ0Q7O0FBRUQsV0FBTzNCLEtBQVA7QUFDRCxHQVhEO0FBYUEsU0FBT1gsZUFBUDtBQUNEOztBQUVELFNBQVNlLDZCQUFULEdBQXlDO0FBQ3ZDLE1BQU13QixRQUFRLGdCQUFTM0MsYUFBVCxPQUFkO0FBQUEsTUFDTWtCLGtCQUFrQixHQUFHcEIsWUFBWSxDQUFDNkMsUUFBRCxDQUR2QztBQUdBLFNBQU96QixrQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5jb25zdCBhcnJheVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdGllcy9hcnJheScpLFxuICAgICAgZmlsZVN5c3RlbVV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdGllcy9maWxlU3lzdGVtJyk7XG5cbmNvbnN0IHsgZmlyc3QsIHNlY29uZCB9ID0gYXJyYXlVdGlsaXRpZXMsXG4gICAgICB7IHJlYWRGaWxlLCB3cml0ZUZpbGUsIGNoZWNrRmlsZUV4aXN0cyB9ID0gZmlsZVN5c3RlbVV0aWxpdGllcztcblxubGV0IHBhdGhSZXNvbHZlciA9IHBhdGgucmVzb2x2ZSxcblx0XHRiYXNlRXh0ZW5zaW9uID0gJyc7XG5cbmZ1bmN0aW9uIHJjKGVudmlyb25tZW50TmFtZU9yQXJndiA9IG51bGwpIHtcbiAgbGV0IGVudmlyb25tZW50LFxuICAgICAgZW52aXJvbm1lbnROYW1lLFxuICAgICAgZW52aXJvbm1lbnROYW1lT3JBcmd2QXJndiA9IChlbnZpcm9ubWVudE5hbWVPckFyZ3YgaW5zdGFuY2VvZiBBcnJheSk7XG5cbiAgaWYgKGVudmlyb25tZW50TmFtZU9yQXJndkFyZ3YpIHtcbiAgICBjb25zdCBhcmd2ID0gZW52aXJvbm1lbnROYW1lT3JBcmd2OyAvLy9cblxuICAgIGVudmlyb25tZW50TmFtZSA9IGVudmlyb25tZW50TmFtZUZyb21Bcmd2KGFyZ3YpO1xuICB9IGVsc2Uge1xuICAgIGVudmlyb25tZW50TmFtZSA9IGVudmlyb25tZW50TmFtZU9yQXJndjsgIC8vL1xuICB9XG5cbiAgY29uc3QganNvbiA9IHJlYWRSQ0ZpbGUoKSxcbiAgICAgICAgeyBlbnZpcm9ubWVudHMgfSA9IGpzb247XG5cbiAgaWYgKGVudmlyb25tZW50TmFtZSA9PT0gbnVsbCkge1xuICAgIGNvbnN0IGZpcnN0RW52aXJvbm1lbnQgPSBmaXJzdChlbnZpcm9ubWVudHMpO1xuXG4gICAgZW52aXJvbm1lbnQgPSBmaXJzdEVudmlyb25tZW50OyAvLy9cbiAgfSBlbHNlIHtcbiAgICBlbnZpcm9ubWVudCA9IGVudmlyb25tZW50cy5maW5kKGZ1bmN0aW9uKGVudmlyb25tZW50KSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IGVudmlyb25tZW50LFxuICAgICAgICAgICAgZm91bmQgPSAobmFtZSA9PT0gZW52aXJvbm1lbnROYW1lKTtcblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlIGVudmlyb25tZW50Lm5hbWU7XG5cbiAgT2JqZWN0LmFzc2lnbihyYywgZW52aXJvbm1lbnQpO1xuXG4gIHJldHVybiBlbnZpcm9ubWVudDtcbn1cblxuZnVuY3Rpb24gcmVhZFJDRmlsZSgpIHtcbiAgY29uc3QgYWJzb2x1dGVSQ0ZpbGVQYXRoID0gYWJzb2x1dGVSQ0ZpbGVQYXRoRnJvbU5vdGhpbmcoKSxcbiAgICAgICAgZmlsZUNvbnRlbnQgPSByZWFkRmlsZShhYnNvbHV0ZVJDRmlsZVBhdGgpLFxuICAgICAgICBqc29uID0gSlNPTi5wYXJzZShmaWxlQ29udGVudCk7XG5cbiAgcmV0dXJuIGpzb247ICAgICAgXG59XG5cbmZ1bmN0aW9uIHdyaXRlUkNGaWxlKGpzb24pIHtcbiAgY29uc3QgYWJzb2x1dGVSQ0ZpbGVQYXRoID0gYWJzb2x1dGVSQ0ZpbGVQYXRoRnJvbU5vdGhpbmcoKSxcbiAgICAgICAgZmlsZUNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uLCBudWxsLCBgXFx0YCk7XG5cbiAgd3JpdGVGaWxlKGFic29sdXRlUkNGaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVSQ0ZpbGUoYWRkZWRQcm9wZXJ0aWVzLCAuLi5kZWxldGVkUHJvcGVydHlOYW1lcykge1xuICBsZXQganNvbiA9IHJlYWRSQ0ZpbGUoKTtcblxuICBpZiAoYWRkZWRQcm9wZXJ0aWVzKSB7XG4gICAgT2JqZWN0LmFzc2lnbihqc29uLCBhZGRlZFByb3BlcnRpZXMpO1xuICB9XG5cbiAgZGVsZXRlZFByb3BlcnR5TmFtZXMuZm9yRWFjaChmdW5jdGlvbihkZWxldGVkUHJvcGVydHlOYW1lKSB7XG4gICAgZGVsZXRlIGpzb25bZGVsZXRlZFByb3BlcnR5TmFtZV07XG4gIH0pO1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pOyAgICAgIFxufVxuXG5mdW5jdGlvbiBjaGVja1JDRmlsZUV4aXN0cygpIHtcbiAgY29uc3QgYWJzb2x1dGVSQ0ZpbGVQYXRoID0gYWJzb2x1dGVSQ0ZpbGVQYXRoRnJvbU5vdGhpbmcoKSxcbiAgICAgICAgcmNGaWxlRXhpc3RzID0gY2hlY2tGaWxlRXhpc3RzKGFic29sdXRlUkNGaWxlUGF0aCk7XG5cbiAgcmV0dXJuIHJjRmlsZUV4aXN0cztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVmFjdW91c1JDRmlsZSgpIHtcbiAgY29uc3QganNvbiA9IHtcbiAgICBcImVudmlyb25tZW50c1wiOiBbXG4gICAgICB7fVxuICAgIF1cbiAgfTtcblxuICB3cml0ZVJDRmlsZShqc29uKTtcbn1cblxuZnVuY3Rpb24gc2V0UkNCYXNlRXh0ZW5zaW9uKHJjQmFzZUV4dGVuc2lvbikgeyBiYXNlRXh0ZW5zaW9uID0gcmNCYXNlRXh0ZW5zaW9uOyB9XG5cbmZ1bmN0aW9uIHNldFJDUGF0aFJlc29sdmVyKHJjUGF0aFJlc29sdmVyKSB7IHBhdGhSZXNvbHZlciA9IHJjUGF0aFJlc29sdmVyOyB9XG5cbk9iamVjdC5hc3NpZ24ocmMsIHtcbiAgcmVhZFJDRmlsZSxcbiAgd3JpdGVSQ0ZpbGUsXG4gIHVwZGF0ZVJDRmlsZSxcbiAgY2hlY2tSQ0ZpbGVFeGlzdHMsXG4gIGNyZWF0ZVZhY3VvdXNSQ0ZpbGUsXG4gIHNldFJDQmFzZUV4dGVuc2lvbixcblx0c2V0UkNQYXRoUmVzb2x2ZXJcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJjO1xuXG5mdW5jdGlvbiBlbnZpcm9ubWVudE5hbWVGcm9tQXJndihhcmd2KSB7XG4gIGxldCBlbnZpcm9ubWVudE5hbWUgPSBudWxsO1xuXG4gIGFyZ3YuZmluZChmdW5jdGlvbihhcmd1bWVudCkgeyAgLy8vXG4gICAgY29uc3QgbWF0Y2hlcyA9IGFyZ3VtZW50Lm1hdGNoKC9cXC1cXC1lbnZpcm9ubWVudD0oLispLyksXG4gICAgICAgICAgZm91bmQgPSAobWF0Y2hlcyAhPT0gbnVsbCk7XG5cbiAgICBpZiAoZm91bmQpIHtcbiAgICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgICBlbnZpcm9ubWVudE5hbWUgPSBzZWNvbmRNYXRjaDtcbiAgICB9XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH0pO1xuXG4gIHJldHVybiBlbnZpcm9ubWVudE5hbWU7XG59XG5cbmZ1bmN0aW9uIGFic29sdXRlUkNGaWxlUGF0aEZyb21Ob3RoaW5nKCkge1xuICBjb25zdCBmaWxlUGF0aCA9IGAuLy4ke2Jhc2VFeHRlbnNpb259cmNgLFxuICAgICAgICBhYnNvbHV0ZVJDRmlsZVBhdGggPSBwYXRoUmVzb2x2ZXIoZmlsZVBhdGgpO1xuXG4gIHJldHVybiBhYnNvbHV0ZVJDRmlsZVBhdGg7XG59XG4iXX0=