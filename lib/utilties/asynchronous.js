'use strict';

function whilst(callback, done, context) {
  var index = -1;

  function next() {
    index++;

    var terminate = callback(next, done, context, index);

    if (terminate) {
      done();
    }
  }

  next();
}

function forEach(array, callback, done, context) {
  var arrayLength = array.length;

  var index = -1;

  function next() {
    index++;

    var terminate = index === arrayLength;

    if (terminate) {
      done();
    } else {
      var element = array[index];

      callback(element, next, done, context, index);
    }
  }

  next();
}

function sequence(callbacks, done, context) {
  var callbacksLength = callbacks.length;

  var index = -1;

  function next() {
    index++;

    var terminate = index === callbacksLength;

    if (terminate) {
      done();
    } else {
      var callback = callbacks[index];

      callback(next, done, context, index);
    }
  }

  next();
}

module.exports = {
  whilst: whilst,
  forEach: forEach,
  sequence: sequence
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsdGllcy9hc3luY2hyb25vdXMuanMiXSwibmFtZXMiOlsid2hpbHN0IiwiY2FsbGJhY2siLCJkb25lIiwiY29udGV4dCIsImluZGV4IiwibmV4dCIsInRlcm1pbmF0ZSIsImZvckVhY2giLCJhcnJheSIsImFycmF5TGVuZ3RoIiwibGVuZ3RoIiwiZWxlbWVudCIsInNlcXVlbmNlIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2tzTGVuZ3RoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsU0FBU0EsTUFBVCxDQUFnQkMsUUFBaEIsRUFBMEJDLElBQTFCLEVBQWdDQyxPQUFoQyxFQUF5QztBQUN2QyxNQUFJQyxRQUFRLENBQUMsQ0FBYjs7QUFFQSxXQUFTQyxJQUFULEdBQWdCO0FBQ2REOztBQUVBLFFBQU1FLFlBQVlMLFNBQVNJLElBQVQsRUFBZUgsSUFBZixFQUFxQkMsT0FBckIsRUFBOEJDLEtBQTlCLENBQWxCOztBQUVBLFFBQUlFLFNBQUosRUFBZTtBQUNiSjtBQUNEO0FBQ0Y7O0FBRURHO0FBQ0Q7O0FBRUQsU0FBU0UsT0FBVCxDQUFpQkMsS0FBakIsRUFBd0JQLFFBQXhCLEVBQWtDQyxJQUFsQyxFQUF3Q0MsT0FBeEMsRUFBaUQ7QUFDL0MsTUFBTU0sY0FBY0QsTUFBTUUsTUFBMUI7O0FBRUEsTUFBSU4sUUFBUSxDQUFDLENBQWI7O0FBRUEsV0FBU0MsSUFBVCxHQUFnQjtBQUNkRDs7QUFFQSxRQUFNRSxZQUFhRixVQUFVSyxXQUE3Qjs7QUFFQSxRQUFJSCxTQUFKLEVBQWU7QUFDYko7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFNUyxVQUFVSCxNQUFNSixLQUFOLENBQWhCOztBQUVBSCxlQUFTVSxPQUFULEVBQWtCTixJQUFsQixFQUF3QkgsSUFBeEIsRUFBOEJDLE9BQTlCLEVBQXVDQyxLQUF2QztBQUNEO0FBQ0Y7O0FBRURDO0FBQ0Q7O0FBRUQsU0FBU08sUUFBVCxDQUFrQkMsU0FBbEIsRUFBNkJYLElBQTdCLEVBQW1DQyxPQUFuQyxFQUE0QztBQUMxQyxNQUFNVyxrQkFBa0JELFVBQVVILE1BQWxDOztBQUVBLE1BQUlOLFFBQVEsQ0FBQyxDQUFiOztBQUVBLFdBQVNDLElBQVQsR0FBZ0I7QUFDZEQ7O0FBRUEsUUFBTUUsWUFBYUYsVUFBVVUsZUFBN0I7O0FBRUEsUUFBSVIsU0FBSixFQUFlO0FBQ2JKO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsVUFBTUQsV0FBV1ksVUFBVVQsS0FBVixDQUFqQjs7QUFFQUgsZUFBU0ksSUFBVCxFQUFlSCxJQUFmLEVBQXFCQyxPQUFyQixFQUE4QkMsS0FBOUI7QUFDRDtBQUNGOztBQUVEQztBQUNEOztBQUVEVSxPQUFPQyxPQUFQLEdBQWlCO0FBQ2ZoQixVQUFRQSxNQURPO0FBRWZPLFdBQVNBLE9BRk07QUFHZkssWUFBVUE7QUFISyxDQUFqQiIsImZpbGUiOiJhc3luY2hyb25vdXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5mdW5jdGlvbiB3aGlsc3QoY2FsbGJhY2ssIGRvbmUsIGNvbnRleHQpIHtcclxuICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgIGluZGV4Kys7XHJcblxyXG4gICAgY29uc3QgdGVybWluYXRlID0gY2FsbGJhY2sobmV4dCwgZG9uZSwgY29udGV4dCwgaW5kZXgpO1xyXG5cclxuICAgIGlmICh0ZXJtaW5hdGUpIHtcclxuICAgICAgZG9uZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV4dCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JFYWNoKGFycmF5LCBjYWxsYmFjaywgZG9uZSwgY29udGV4dCkge1xyXG4gIGNvbnN0IGFycmF5TGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xyXG5cclxuICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgIGluZGV4Kys7XHJcblxyXG4gICAgY29uc3QgdGVybWluYXRlID0gKGluZGV4ID09PSBhcnJheUxlbmd0aCk7XHJcblxyXG4gICAgaWYgKHRlcm1pbmF0ZSkge1xyXG4gICAgICBkb25lKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gYXJyYXlbaW5kZXhdO1xyXG5cclxuICAgICAgY2FsbGJhY2soZWxlbWVudCwgbmV4dCwgZG9uZSwgY29udGV4dCwgaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV4dCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXF1ZW5jZShjYWxsYmFja3MsIGRvbmUsIGNvbnRleHQpIHtcclxuICBjb25zdCBjYWxsYmFja3NMZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoO1xyXG5cclxuICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgIGluZGV4Kys7XHJcblxyXG4gICAgY29uc3QgdGVybWluYXRlID0gKGluZGV4ID09PSBjYWxsYmFja3NMZW5ndGgpO1xyXG5cclxuICAgIGlmICh0ZXJtaW5hdGUpIHtcclxuICAgICAgZG9uZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaW5kZXhdO1xyXG5cclxuICAgICAgY2FsbGJhY2sobmV4dCwgZG9uZSwgY29udGV4dCwgaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV4dCgpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICB3aGlsc3Q6IHdoaWxzdCxcclxuICBmb3JFYWNoOiBmb3JFYWNoLFxyXG4gIHNlcXVlbmNlOiBzZXF1ZW5jZVxyXG59O1xyXG4iXX0=